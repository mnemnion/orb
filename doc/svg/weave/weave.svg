<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: lpegNode Pages: 1 -->
<svg width="4616pt" height="2485pt"
 viewBox="0.00 0.00 4616.30 2484.60" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 2480.6037)">
<title>lpegNode</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-2480.6037 4612.2972,-2480.6037 4612.2972,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="768" cy="-2458.6037" rx="46.1547" ry="18"/>
<text text-anchor="middle" x="768" y="-2454.4037" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 211</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="768" cy="-2386.6037" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="768" y="-2382.4037" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;154</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M768,-2440.4351C768,-2432.7347 768,-2423.5781 768,-2415.0203"/>
<polygon fill="#000000" stroke="#000000" points="771.5001,-2415.0169 768,-2405.017 764.5001,-2415.017 771.5001,-2415.0169"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="416" cy="-2314.6037" rx="49.5296" ry="18"/>
<text text-anchor="middle" x="416" y="-2310.4037" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">1 : Weave</text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M712.7757,-2376.7664C656.3672,-2366.5187 566.3369,-2349.6112 489,-2332.6037 481.7313,-2331.0052 474.0794,-2329.2259 466.5754,-2327.4256"/>
<polygon fill="#000000" stroke="#000000" points="467.3842,-2324.0204 456.8405,-2325.0602 465.7314,-2330.8224 467.3842,-2324.0204"/>
</g>
<!-- prose_3 -->
<g id="node4" class="node">
<title>prose_3</title>
<ellipse fill="none" stroke="#000000" cx="530" cy="-2314.6037" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="530" y="-2310.4037" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;prose_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M720.0402,-2374.1393C681.4253,-2363.8244 625.885,-2348.3576 578,-2332.6037 574.1626,-2331.3412 570.1769,-2329.9606 566.2163,-2328.5433"/>
<polygon fill="#000000" stroke="#000000" points="567.115,-2325.1451 556.5212,-2324.9915 564.7069,-2331.7179 567.115,-2325.1451"/>
</g>
<!-- prose_4 -->
<g id="node5" class="node">
<title>prose_4</title>
<ellipse fill="none" stroke="#000000" cx="619" cy="-2314.6037" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="619" y="-2310.4037" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;prose_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M735.3013,-2370.803C710.8419,-2358.9837 677.4944,-2342.8695 652.7785,-2330.9262"/>
<polygon fill="#000000" stroke="#000000" points="654.2918,-2327.7703 643.765,-2326.5707 651.2461,-2334.073 654.2918,-2327.7703"/>
</g>
<!-- prose_5 -->
<g id="node6" class="node">
<title>prose_5</title>
<ellipse fill="none" stroke="#000000" cx="704" cy="-2314.6037" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="704" y="-2310.4037" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;prose_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M752.1798,-2368.806C744.1184,-2359.7369 734.1979,-2348.5763 725.4584,-2338.7444"/>
<polygon fill="#000000" stroke="#000000" points="728.0204,-2336.3584 718.7607,-2331.2095 722.7885,-2341.0089 728.0204,-2336.3584"/>
</g>
<!-- codeblock_6 -->
<g id="node7" class="node">
<title>codeblock_6</title>
<ellipse fill="none" stroke="#000000" cx="834" cy="-2314.6037" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="834" y="-2310.4037" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 10&#45;58</text>
</g>
<!-- section_1&#45;&gt;codeblock_6 -->
<g id="edge6" class="edge">
<title>section_1&#45;&gt;codeblock_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M784.3146,-2368.806C792.3267,-2360.0655 802.1196,-2349.3823 810.8868,-2339.8182"/>
<polygon fill="#000000" stroke="#000000" points="813.4671,-2342.1829 817.6443,-2332.4463 808.307,-2337.4528 813.4671,-2342.1829"/>
</g>
<!-- codeblock_7 -->
<g id="node8" class="node">
<title>codeblock_7</title>
<ellipse fill="none" stroke="#000000" cx="1091" cy="-2314.6037" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1091" y="-2310.4037" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 60&#45;64</text>
</g>
<!-- section_1&#45;&gt;codeblock_7 -->
<g id="edge7" class="edge">
<title>section_1&#45;&gt;codeblock_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M819.1803,-2375.1951C874.8711,-2362.7811 964.087,-2342.8939 1025.0066,-2329.3143"/>
<polygon fill="#000000" stroke="#000000" points="1025.9081,-2332.6993 1034.9071,-2327.1074 1024.3851,-2325.867 1025.9081,-2332.6993"/>
</g>
<!-- section_8 -->
<g id="node9" class="node">
<title>section_8</title>
<ellipse fill="none" stroke="#000000" cx="1532" cy="-2314.6037" rx="70.655" ry="18"/>
<text text-anchor="middle" x="1532" y="-2310.4037" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 67&#45;154</text>
</g>
<!-- section_1&#45;&gt;section_8 -->
<g id="edge8" class="edge">
<title>section_1&#45;&gt;section_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M830.1974,-2380.7422C969.0635,-2367.6553 1304.0093,-2336.0897 1455.4143,-2321.8212"/>
<polygon fill="#000000" stroke="#000000" points="1455.928,-2325.2884 1465.5555,-2320.8655 1455.2712,-2318.3193 1455.928,-2325.2884"/>
</g>
<!-- section_9 -->
<g id="node10" class="node">
<title>section_9</title>
<ellipse fill="none" stroke="#000000" cx="2918" cy="-2314.6037" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="2918" y="-2310.4037" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 155&#45;159</text>
</g>
<!-- section_1&#45;&gt;section_9 -->
<g id="edge9" class="edge">
<title>section_1&#45;&gt;section_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M833.2248,-2384.4194C1144.8682,-2373.983 2481.5949,-2329.2182 2833.0631,-2317.4481"/>
<polygon fill="#000000" stroke="#000000" points="2833.2949,-2320.9424 2843.1722,-2317.1096 2833.0606,-2313.9463 2833.2949,-2320.9424"/>
</g>
<!-- leaf_10 -->
<g id="node11" class="node">
<title>leaf_10</title>
<polygon fill="none" stroke="#c0c0c0" points="446.5,-1910.3031 381.5,-1910.3031 381.5,-1874.3031 446.5,-1874.3031 446.5,-1910.3031"/>
<text text-anchor="middle" x="414" y="-1888.8031" font-family="Inconsolata" font-size="14.00" fill="#000000">* Weave</text>
</g>
<!-- header_2&#45;&gt;leaf_10 -->
<g id="edge10" class="edge">
<title>header_2&#45;&gt;leaf_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M415.9141,-2296.458C415.6006,-2230.2651 414.5169,-2001.4552 414.1347,-1920.7533"/>
<polygon fill="#000000" stroke="#000000" points="417.633,-1920.3645 414.0856,-1910.3812 410.6331,-1920.3977 417.633,-1920.3645"/>
</g>
<!-- raw_11 -->
<g id="node12" class="node">
<title>raw_11</title>
<ellipse fill="none" stroke="#000000" cx="492" cy="-1892.3031" rx="27" ry="18"/>
<text text-anchor="middle" x="492" y="-1888.1031" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_3&#45;&gt;raw_11 -->
<g id="edge11" class="edge">
<title>prose_3&#45;&gt;raw_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M528.3672,-2296.458C522.4109,-2230.2651 501.8219,-2001.4552 494.56,-1920.7533"/>
<polygon fill="#000000" stroke="#000000" points="498.0089,-1920.0273 493.6267,-1910.3812 491.0371,-1920.6547 498.0089,-1920.0273"/>
</g>
<!-- raw_13 -->
<g id="node14" class="node">
<title>raw_13</title>
<ellipse fill="none" stroke="#000000" cx="564" cy="-1892.3031" rx="27" ry="18"/>
<text text-anchor="middle" x="564" y="-1888.1031" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_4&#45;&gt;raw_13 -->
<g id="edge13" class="edge">
<title>prose_4&#45;&gt;raw_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M611.5624,-2296.919C607.4998,-2286.5241 602.7498,-2273.0241 600,-2260.6037 572.4228,-2136.0424 565.9673,-1983.1178 564.4588,-1920.7805"/>
<polygon fill="#000000" stroke="#000000" points="567.9532,-1920.4792 564.2371,-1910.5575 560.9548,-1920.6311 567.9532,-1920.4792"/>
</g>
<!-- raw_15 -->
<g id="node16" class="node">
<title>raw_15</title>
<ellipse fill="none" stroke="#000000" cx="636" cy="-1892.3031" rx="27" ry="18"/>
<text text-anchor="middle" x="636" y="-1888.1031" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_5&#45;&gt;raw_15 -->
<g id="edge15" class="edge">
<title>prose_5&#45;&gt;raw_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M691.2531,-2297.5467C684.3374,-2287.361 676.3374,-2273.861 672,-2260.6037 632.2351,-2139.0628 632.5432,-1983.8666 634.6483,-1920.8302"/>
<polygon fill="#000000" stroke="#000000" points="638.1585,-1920.6248 635.0386,-1910.4997 631.1635,-1920.3604 638.1585,-1920.6248"/>
</g>
<!-- leaf_17 -->
<g id="node18" class="node">
<title>leaf_17</title>
<polygon fill="none" stroke="#c0c0c0" points="1040.5,-2260.4044 681.5,-2260.4044 681.5,-1524.2018 1040.5,-1524.2018 1040.5,-2260.4044"/>
<text text-anchor="middle" x="861" y="-2245.4037" font-family="Inconsolata" font-size="14.00" fill="#000000">local L = require &quot;lpeg&quot;</text>
<text text-anchor="middle" x="861" y="-2214.0037" font-family="Inconsolata" font-size="14.00" fill="#000000">local pl_mini = require &quot;util/plmini&quot;</text>
<text text-anchor="middle" x="861" y="-2198.6037" font-family="Inconsolata" font-size="14.00" fill="#000000">local getfiles = pl_mini.dir.getfiles</text>
<text text-anchor="middle" x="861" y="-2183.2036" font-family="Inconsolata" font-size="14.00" fill="#000000">local makepath = pl_mini.dir.makepath</text>
<text text-anchor="middle" x="861" y="-2167.8036" font-family="Inconsolata" font-size="14.00" fill="#000000">local getdirectories = pl_mini.dir.getdirectories</text>
<text text-anchor="middle" x="861" y="-2152.4036" font-family="Inconsolata" font-size="14.00" fill="#000000">local extension = pl_mini.path.extension</text>
<text text-anchor="middle" x="861" y="-2137.0035" font-family="Inconsolata" font-size="14.00" fill="#000000">local dirname = pl_mini.path.dirname</text>
<text text-anchor="middle" x="861" y="-2121.6035" font-family="Inconsolata" font-size="14.00" fill="#000000">local basename = pl_mini.path.basename</text>
<text text-anchor="middle" x="861" y="-2106.2035" font-family="Inconsolata" font-size="14.00" fill="#000000">local read = pl_mini.file.read</text>
<text text-anchor="middle" x="861" y="-2090.8034" font-family="Inconsolata" font-size="14.00" fill="#000000">local write = pl_mini.file.write</text>
<text text-anchor="middle" x="861" y="-2075.4034" font-family="Inconsolata" font-size="14.00" fill="#000000">local isdir = pl_mini.path.isdir</text>
<text text-anchor="middle" x="861" y="-2044.0034" font-family="Inconsolata" font-size="14.00" fill="#000000">local u = {}</text>
<text text-anchor="middle" x="861" y="-2028.6033" font-family="Inconsolata" font-size="14.00" fill="#000000">function u.inherit(meta)</text>
<text text-anchor="middle" x="861" y="-2013.2033" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local MT = meta or {}</text>
<text text-anchor="middle" x="861" y="-1997.8033" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local M = setmetatable({}, MT)</text>
<text text-anchor="middle" x="861" y="-1982.4032" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;M.__index = M</text>
<text text-anchor="middle" x="861" y="-1967.0032" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local m = setmetatable({}, M)</text>
<text text-anchor="middle" x="861" y="-1951.6032" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;m.__index = m</text>
<text text-anchor="middle" x="861" y="-1936.2032" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return M, m</text>
<text text-anchor="middle" x="861" y="-1920.8031" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="861" y="-1905.4031" font-family="Inconsolata" font-size="14.00" fill="#000000">function u.export(mod, constructor)</text>
<text text-anchor="middle" x="861" y="-1890.0031" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;mod.__call = constructor</text>
<text text-anchor="middle" x="861" y="-1874.603" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return setmetatable({}, mod)</text>
<text text-anchor="middle" x="861" y="-1859.203" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="861" y="-1827.803" font-family="Inconsolata" font-size="14.00" fill="#000000">local a = require &quot;singletons/anterm&quot;</text>
<text text-anchor="middle" x="861" y="-1780.4029" font-family="Inconsolata" font-size="14.00" fill="#000000">local s = require &quot;singletons/status&quot; ()</text>
<text text-anchor="middle" x="861" y="-1765.0029" font-family="Inconsolata" font-size="14.00" fill="#000000">s.verbose = false</text>
<text text-anchor="middle" x="861" y="-1733.6029" font-family="Inconsolata" font-size="14.00" fill="#000000">local m = require &quot;orb:Orbit/morphemes&quot;</text>
<text text-anchor="middle" x="861" y="-1718.2028" font-family="Inconsolata" font-size="14.00" fill="#000000">local walk = require &quot;orb:walk/walk&quot;</text>
<text text-anchor="middle" x="861" y="-1702.8028" font-family="Inconsolata" font-size="14.00" fill="#000000">local strHas = walk.strHas</text>
<text text-anchor="middle" x="861" y="-1687.4028" font-family="Inconsolata" font-size="14.00" fill="#000000">local endsWith = walk.endsWith</text>
<text text-anchor="middle" x="861" y="-1672.0027" font-family="Inconsolata" font-size="14.00" fill="#000000">local subLastFor = walk.subLastFor</text>
<text text-anchor="middle" x="861" y="-1656.6027" font-family="Inconsolata" font-size="14.00" fill="#000000">local writeOnChange = walk.writeOnChange</text>
<text text-anchor="middle" x="861" y="-1641.2027" font-family="Inconsolata" font-size="14.00" fill="#000000">local Path = require &quot;orb:walk/path&quot;</text>
<text text-anchor="middle" x="861" y="-1625.8027" font-family="Inconsolata" font-size="14.00" fill="#000000">local Dir = require &quot;orb:walk/directory&quot;</text>
<text text-anchor="middle" x="861" y="-1610.4026" font-family="Inconsolata" font-size="14.00" fill="#000000">local File = require &quot;orb:walk/file&quot;</text>
<text text-anchor="middle" x="861" y="-1595.0026" font-family="Inconsolata" font-size="14.00" fill="#000000">local epeg = require &quot;orb:util/epeg&quot;</text>
<text text-anchor="middle" x="861" y="-1563.6026" font-family="Inconsolata" font-size="14.00" fill="#000000">local Doc = require &quot;orb:Orbit/doc&quot;</text>
<text text-anchor="middle" x="861" y="-1532.2025" font-family="Inconsolata" font-size="14.00" fill="#000000">local W, w = u.inherit()</text>
</g>
<!-- codeblock_6&#45;&gt;leaf_17 -->
<g id="edge17" class="edge">
<title>codeblock_6&#45;&gt;leaf_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M835.1602,-2296.458C835.6038,-2289.519 836.1617,-2280.7929 836.811,-2270.6377"/>
<polygon fill="#000000" stroke="#000000" points="840.3155,-2270.6781 837.4607,-2260.4751 833.3297,-2270.2314 840.3155,-2270.6781"/>
</g>
<!-- leaf_18 -->
<g id="node19" class="node">
<title>leaf_18</title>
<polygon fill="none" stroke="#c0c0c0" points="1291.5,-1919.5036 1058.5,-1919.5036 1058.5,-1865.1026 1291.5,-1865.1026 1291.5,-1919.5036"/>
<text text-anchor="middle" x="1175" y="-1904.2032" font-family="Inconsolata" font-size="14.00" fill="#000000">function W.weaveMd(weaver, doc)</text>
<text text-anchor="middle" x="1175" y="-1888.8031" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return doc:toMarkdown()</text>
<text text-anchor="middle" x="1175" y="-1873.4031" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_7&#45;&gt;leaf_18 -->
<g id="edge18" class="edge">
<title>codeblock_7&#45;&gt;leaf_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1094.6094,-2296.458C1107.3285,-2232.5139 1150.2334,-2016.8142 1167.6053,-1929.479"/>
<polygon fill="#000000" stroke="#000000" points="1171.0753,-1929.9742 1169.5935,-1919.4835 1164.2098,-1928.6085 1171.0753,-1929.9742"/>
</g>
<!-- header_19 -->
<g id="node20" class="node">
<title>header_19</title>
<ellipse fill="none" stroke="#000000" cx="1375" cy="-1892.3031" rx="65.81" ry="18"/>
<text text-anchor="middle" x="1375" y="-1888.1031" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : .dot to .svg</text>
</g>
<!-- section_8&#45;&gt;header_19 -->
<g id="edge19" class="edge">
<title>section_8&#45;&gt;header_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1496.0286,-2298.9707C1479.5709,-2290.0395 1461.2685,-2277.2648 1450,-2260.6037 1376.4128,-2151.801 1372.1789,-1986.3915 1373.7298,-1920.6654"/>
<polygon fill="#000000" stroke="#000000" points="1377.2289,-1920.7432 1374.0316,-1910.6423 1370.2321,-1920.5324 1377.2289,-1920.7432"/>
</g>
<!-- prose_20 -->
<g id="node21" class="node">
<title>prose_20</title>
<ellipse fill="none" stroke="#000000" cx="1491" cy="-1892.3031" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1491" y="-1888.1031" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_8&#45;&gt;prose_20 -->
<g id="edge20" class="edge">
<title>section_8&#45;&gt;prose_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1530.2383,-2296.458C1523.8118,-2230.2651 1501.5973,-2001.4552 1493.7622,-1920.7533"/>
<polygon fill="#000000" stroke="#000000" points="1497.2052,-1919.9962 1492.7552,-1910.3812 1490.238,-1920.6727 1497.2052,-1919.9962"/>
</g>
<!-- prose_21 -->
<g id="node22" class="node">
<title>prose_21</title>
<ellipse fill="none" stroke="#000000" cx="1573" cy="-1892.3031" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1573" y="-1888.1031" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_8&#45;&gt;prose_21 -->
<g id="edge21" class="edge">
<title>section_8&#45;&gt;prose_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1533.7617,-2296.458C1540.1882,-2230.2651 1562.4027,-2001.4552 1570.2378,-1920.7533"/>
<polygon fill="#000000" stroke="#000000" points="1573.762,-1920.6727 1571.2448,-1910.3812 1566.7948,-1919.9962 1573.762,-1920.6727"/>
</g>
<!-- codeblock_22 -->
<g id="node23" class="node">
<title>codeblock_22</title>
<ellipse fill="none" stroke="#000000" cx="1770" cy="-1892.3031" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1770" y="-1888.1031" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 73&#45;85</text>
</g>
<!-- section_8&#45;&gt;codeblock_22 -->
<g id="edge22" class="edge">
<title>section_8&#45;&gt;codeblock_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1565.3466,-2298.6121C1581.7579,-2289.3815 1600.799,-2276.451 1614,-2260.6037 1703.6748,-2152.9527 1748.8997,-1986.2092 1764.0366,-1920.3927"/>
<polygon fill="#000000" stroke="#000000" points="1767.5119,-1920.8905 1766.2873,-1910.3666 1760.6818,-1919.3571 1767.5119,-1920.8905"/>
</g>
<!-- codeblock_23 -->
<g id="node24" class="node">
<title>codeblock_23</title>
<ellipse fill="none" stroke="#000000" cx="2193" cy="-1892.3031" rx="82.2579" ry="18"/>
<text text-anchor="middle" x="2193" y="-1888.1031" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 89&#45;152</text>
</g>
<!-- section_8&#45;&gt;codeblock_23 -->
<g id="edge23" class="edge">
<title>section_8&#45;&gt;codeblock_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1598.7733,-2308.6429C1680.3098,-2300.4802 1812.7136,-2284.108 1856,-2260.6037 2013.0829,-2175.3086 2135.7899,-1988.4061 2177.5572,-1918.9707"/>
<polygon fill="#000000" stroke="#000000" points="2180.5821,-1920.7315 2182.6893,-1910.3483 2174.567,-1917.1512 2180.5821,-1920.7315"/>
</g>
<!-- header_31 -->
<g id="node32" class="node">
<title>header_31</title>
<ellipse fill="none" stroke="#000000" cx="2840" cy="-1892.3031" rx="106.5613" ry="18"/>
<text text-anchor="middle" x="2840" y="-1888.1031" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : New Weave Interface</text>
</g>
<!-- section_9&#45;&gt;header_31 -->
<g id="edge31" class="edge">
<title>section_9&#45;&gt;header_31</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2914.6484,-2296.458C2902.3974,-2230.1297 2859.9877,-2000.5187 2845.1637,-1920.2601"/>
<polygon fill="#000000" stroke="#000000" points="2848.5972,-1919.5792 2843.3391,-1910.3812 2841.7137,-1920.8506 2848.5972,-1919.5792"/>
</g>
<!-- prose_32 -->
<g id="node33" class="node">
<title>prose_32</title>
<ellipse fill="none" stroke="#000000" cx="2997" cy="-1892.3031" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2997" y="-1888.1031" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_9&#45;&gt;prose_32 -->
<g id="edge32" class="edge">
<title>section_9&#45;&gt;prose_32</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2933.8747,-2296.9414C2941.8925,-2286.982 2950.9654,-2273.8971 2956,-2260.6037 3001.4502,-2140.5968 3000.9656,-1984.0126 2998.5346,-1920.7011"/>
<polygon fill="#000000" stroke="#000000" points="3002.0299,-1920.5145 2998.1016,-1910.6748 2995.0364,-1920.8165 3002.0299,-1920.5145"/>
</g>
<!-- section_33 -->
<g id="node34" class="node">
<title>section_33</title>
<ellipse fill="none" stroke="#000000" cx="3636" cy="-1892.3031" rx="74.6878" ry="18"/>
<text text-anchor="middle" x="3636" y="-1888.1031" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 160&#45;211</text>
</g>
<!-- section_9&#45;&gt;section_33 -->
<g id="edge33" class="edge">
<title>section_9&#45;&gt;section_33</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2956.1641,-2298.9256C2980.0489,-2288.7487 3011.2551,-2274.7812 3038,-2260.6037 3260.5906,-2142.6084 3513.423,-1975.1634 3602.6797,-1914.9561"/>
<polygon fill="#000000" stroke="#000000" points="3604.7186,-1917.8026 3611.0451,-1909.304 3600.7996,-1912.0024 3604.7186,-1917.8026"/>
</g>
<!-- leaf_12 -->
<g id="node13" class="node">
<title>leaf_12</title>
<polygon fill="none" stroke="#c0c0c0" points="450,-1040.7028 0,-1040.7028 0,-968.9005 450,-968.9005 450,-1040.7028"/>
<text text-anchor="middle" x="225" y="-977.3016" font-family="Inconsolata" font-size="14.00" fill="#000000">Our weaver is currently somewhat narrowly focused on markdown.</text>
</g>
<!-- raw_11&#45;&gt;leaf_12 -->
<g id="edge12" class="edge">
<title>raw_11&#45;&gt;leaf_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M492.187,-1873.929C492.3117,-1819.5052 489.5888,-1654.7791 455,-1524.0025 406.2457,-1339.6673 299.8821,-1137.517 250.783,-1049.6821"/>
<polygon fill="#000000" stroke="#000000" points="253.7389,-1047.7975 245.7905,-1040.7922 247.6355,-1051.2252 253.7389,-1047.7975"/>
</g>
<!-- leaf_14 -->
<g id="node15" class="node">
<title>leaf_14</title>
<polygon fill="none" stroke="#c0c0c0" points="659.5,-1024.7037 468.5,-1024.7037 468.5,-984.8995 659.5,-984.8995 659.5,-1024.7037"/>
<text text-anchor="middle" x="564" y="-993.3016" font-family="Inconsolata" font-size="14.00" fill="#000000">This will change in time.</text>
</g>
<!-- raw_13&#45;&gt;leaf_14 -->
<g id="edge14" class="edge">
<title>raw_13&#45;&gt;leaf_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M564,-1874.1728C564,-1763.1274 564,-1175.0227 564,-1034.8244"/>
<polygon fill="#000000" stroke="#000000" points="567.5001,-1034.7954 564,-1024.7954 560.5001,-1034.7954 567.5001,-1034.7954"/>
</g>
<!-- leaf_16 -->
<g id="node17" class="node">
<title>leaf_16</title>
<polygon fill="none" stroke="#c0c0c0" points="834,-1024.7037 678,-1024.7037 678,-984.8995 834,-984.8995 834,-1024.7037"/>
<text text-anchor="middle" x="756" y="-993.3016" font-family="Inconsolata" font-size="14.00" fill="#000000">Now to activate dot!</text>
</g>
<!-- raw_15&#45;&gt;leaf_16 -->
<g id="edge16" class="edge">
<title>raw_15&#45;&gt;leaf_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M637.3598,-1874.2454C641.4794,-1820.6919 654.6139,-1658.1177 672,-1524.0025 696.2171,-1337.1937 735.9524,-1114.2999 750.4689,-1034.7908"/>
<polygon fill="#000000" stroke="#000000" points="753.9871,-1035.0089 752.3457,-1024.542 747.1016,-1033.748 753.9871,-1035.0089"/>
</g>
<!-- leaf_24 -->
<g id="node25" class="node">
<title>leaf_24</title>
<polygon fill="none" stroke="#c0c0c0" points="1404,-1022.8016 1276,-1022.8016 1276,-986.8016 1404,-986.8016 1404,-1022.8016"/>
<text text-anchor="middle" x="1340" y="-1001.3016" font-family="Inconsolata" font-size="14.00" fill="#000000">*** .dot to .svg</text>
</g>
<!-- header_19&#45;&gt;leaf_24 -->
<g id="edge24" class="edge">
<title>header_19&#45;&gt;leaf_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1374.285,-1874.1728C1369.8865,-1762.6384 1346.5083,-1169.8336 1341.112,-1032.9983"/>
<polygon fill="#000000" stroke="#000000" points="1344.6053,-1032.7574 1340.7139,-1022.9032 1337.6107,-1033.0333 1344.6053,-1032.7574"/>
</g>
<!-- raw_25 -->
<g id="node26" class="node">
<title>raw_25</title>
<ellipse fill="none" stroke="#000000" cx="1449" cy="-1004.8016" rx="27" ry="18"/>
<text text-anchor="middle" x="1449" y="-1000.6016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_20&#45;&gt;raw_25 -->
<g id="edge25" class="edge">
<title>prose_20&#45;&gt;raw_25</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1490.142,-1874.1728C1484.8638,-1762.6384 1456.8099,-1169.8336 1450.3344,-1032.9983"/>
<polygon fill="#000000" stroke="#000000" points="1453.8255,-1032.7265 1449.8566,-1022.9032 1446.8334,-1033.0575 1453.8255,-1032.7265"/>
</g>
<!-- raw_27 -->
<g id="node28" class="node">
<title>raw_27</title>
<ellipse fill="none" stroke="#000000" cx="1521" cy="-1004.8016" rx="27" ry="18"/>
<text text-anchor="middle" x="1521" y="-1000.6016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_21&#45;&gt;raw_27 -->
<g id="edge27" class="edge">
<title>prose_21&#45;&gt;raw_27</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1571.9377,-1874.1728C1565.4028,-1762.6384 1530.6695,-1169.8336 1522.6521,-1032.9983"/>
<polygon fill="#000000" stroke="#000000" points="1526.1396,-1032.6813 1522.0606,-1022.9032 1519.1516,-1033.0908 1526.1396,-1032.6813"/>
</g>
<!-- leaf_29 -->
<g id="node30" class="node">
<title>leaf_29</title>
<polygon fill="none" stroke="#c0c0c0" points="2044,-1093.7024 1566,-1093.7024 1566,-915.9008 2044,-915.9008 2044,-1093.7024"/>
<text text-anchor="middle" x="1805" y="-1078.3018" font-family="Inconsolata" font-size="14.00" fill="#000000">local popen = io.popen</text>
<text text-anchor="middle" x="1805" y="-1062.9018" font-family="Inconsolata" font-size="14.00" fill="#000000">local function dotToSvg(dotted, out_file)</text>
<text text-anchor="middle" x="1805" y="-1047.5017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local success, svg_file = pcall (popen,</text>
<text text-anchor="middle" x="1805" y="-1032.1017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&quot;dot &#45;Tsvg &quot; .. tostring(out_file), &quot;r&quot;)</text>
<text text-anchor="middle" x="1805" y="-1016.7017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if success then</text>
<text text-anchor="middle" x="1805" y="-1001.3016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return svg_file:read(&quot;*a&quot;)</text>
<text text-anchor="middle" x="1805" y="-985.9016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else</text>
<text text-anchor="middle" x="1805" y="-970.5016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; #todo start using %d and format!</text>
<text text-anchor="middle" x="1805" y="-955.1015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;s:complain(&quot;dotError&quot;, &quot;dot failed with &quot; .. success)</text>
<text text-anchor="middle" x="1805" y="-939.7015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1805" y="-924.3015" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_22&#45;&gt;leaf_29 -->
<g id="edge29" class="edge">
<title>codeblock_22&#45;&gt;leaf_29</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1770.715,-1874.1728C1774.5623,-1776.6169 1792.9299,-1310.8655 1801.0845,-1104.0879"/>
<polygon fill="#000000" stroke="#000000" points="1804.5918,-1103.9702 1801.4886,-1093.84 1797.5972,-1103.6943 1804.5918,-1103.9702"/>
</g>
<!-- leaf_30 -->
<g id="node31" class="node">
<title>leaf_30</title>
<polygon fill="none" stroke="#c0c0c0" points="2743.5,-1488.2035 2062.5,-1488.2035 2062.5,-521.3998 2743.5,-521.3998 2743.5,-1488.2035"/>
<text text-anchor="middle" x="2403" y="-1472.8025" font-family="Inconsolata" font-size="14.00" fill="#000000">local function weave_dir(weaver, pwd, depth)</text>
<text text-anchor="middle" x="2403" y="-1457.4025" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local depth = depth + 1</text>
<text text-anchor="middle" x="2403" y="-1442.0024" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for dir_str in pl_mini.dir.walk(pwd, false, false) do</text>
<text text-anchor="middle" x="2403" y="-1426.6024" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local dir = Dir(dir_str)</text>
<text text-anchor="middle" x="2403" y="-1411.2024" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if not strHas(&quot;.git&quot;, dir.path.str)</text>
<text text-anchor="middle" x="2403" y="-1395.8023" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;and not strHas(&quot;src/lib&quot;, dir.path.str) then</text>
<text text-anchor="middle" x="2403" y="-1380.4023" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;dir = dir.path.str &#45;&#45; migrate this down</text>
<text text-anchor="middle" x="2403" y="-1365.0023" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local files = getfiles(dir)</text>
<text text-anchor="middle" x="2403" y="-1349.6022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;s:verb((&quot; &#160;&quot;):rep(depth) .. &quot;* &quot; .. dir)</text>
<text text-anchor="middle" x="2403" y="-1334.2022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local subdirs = getdirectories(dir)</text>
<text text-anchor="middle" x="2403" y="-1318.8022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;for _, f in ipairs(files) do</text>
<text text-anchor="middle" x="2403" y="-1303.4022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if extension(f) == &quot;.orb&quot; then</text>
<text text-anchor="middle" x="2403" y="-1288.0021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; Weave and prepare out directory</text>
<text text-anchor="middle" x="2403" y="-1272.6021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;s:verb((&quot; &#160;&quot;):rep(depth) .. &quot; &#160;&#45; &quot; .. f)</text>
<text text-anchor="middle" x="2403" y="-1257.2021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local orb_f = read(f)</text>
<text text-anchor="middle" x="2403" y="-1241.802" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local doc = Doc(orb_f)</text>
<text text-anchor="middle" x="2403" y="-1226.402" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local doc_md_dir = subLastFor(&quot;/orb&quot;, &quot;/doc/md&quot;, dirname(f))</text>
<text text-anchor="middle" x="2403" y="-1211.002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local doc_dot_dir = subLastFor(&quot;/orb&quot;, &quot;/doc/dot&quot;, dirname(f))</text>
<text text-anchor="middle" x="2403" y="-1195.6019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local doc_svg_dir = subLastFor(&quot;/orb&quot;, &quot;/doc/svg&quot;, dirname(f))</text>
<text text-anchor="middle" x="2403" y="-1180.2019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;makepath(doc_md_dir)</text>
<text text-anchor="middle" x="2403" y="-1164.8019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;makepath(doc_dot_dir)</text>
<text text-anchor="middle" x="2403" y="-1149.4018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;makepath(doc_svg_dir)</text>
<text text-anchor="middle" x="2403" y="-1134.0018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local bare_name = basename(f):sub(1, &#45;5) &#45;&#45; &#160;== #&quot;.orb&quot;</text>
<text text-anchor="middle" x="2403" y="-1118.6018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local out_md_name = doc_md_dir .. &quot;/&quot; .. bare_name .. &quot;.md&quot;</text>
<text text-anchor="middle" x="2403" y="-1103.2017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local out_dot_name = doc_dot_dir .. &quot;/&quot; .. bare_name .. &quot;.dot&quot;</text>
<text text-anchor="middle" x="2403" y="-1087.8017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local out_svg_name = doc_svg_dir .. &quot;/&quot; .. bare_name .. &quot;.svg&quot;</text>
<text text-anchor="middle" x="2403" y="-1072.4017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local woven_md = weaver:weaveMd(doc) or &quot;&quot;</text>
<text text-anchor="middle" x="2403" y="-1041.0017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; Compare, report, and write out if necessary</text>
<text text-anchor="middle" x="2403" y="-1025.6016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local last_md = read(out_md_name) or &quot;&quot;</text>
<text text-anchor="middle" x="2403" y="-1010.2016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local changed_md = writeOnChange(woven_md, last_md, out_md_name, depth)</text>
<text text-anchor="middle" x="2403" y="-994.8016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local woven_dot = doc:dot() or &quot;&quot;</text>
<text text-anchor="middle" x="2403" y="-979.4015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local last_dot = read(out_dot_name) or &quot;&quot;</text>
<text text-anchor="middle" x="2403" y="-964.0015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local changed_dot = writeOnChange(woven_dot, last_dot, out_dot_name, depth)</text>
<text text-anchor="middle" x="2403" y="-932.6015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; SVG call is fairly slow and only useful of the dot has changed</text>
<text text-anchor="middle" x="2403" y="-917.2014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if changed_dot then</text>
<text text-anchor="middle" x="2403" y="-901.8014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local woven_svg = dotToSvg(woven_dot, out_dot_name)</text>
<text text-anchor="middle" x="2403" y="-886.4014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local last_svg = read(out_svg_name) or &quot;&quot;</text>
<text text-anchor="middle" x="2403" y="-871.0013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;writeOnChange(woven_svg, last_svg, out_svg_name, depth)</text>
<text text-anchor="middle" x="2403" y="-855.6013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2403" y="-840.2013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2403" y="-824.8012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2403" y="-809.4012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2403" y="-794.0012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2403" y="-762.6012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return true</text>
<text text-anchor="middle" x="2403" y="-747.2011" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="2403" y="-715.8011" font-family="Inconsolata" font-size="14.00" fill="#000000">local function weave_all(weaver, pwd)</text>
<text text-anchor="middle" x="2403" y="-700.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for dir in pl_mini.dir.walk(pwd, false, false) do</text>
<text text-anchor="middle" x="2403" y="-685.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if not strHas(&quot;.git&quot;, dir) and isdir(dir)</text>
<text text-anchor="middle" x="2403" y="-669.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;and endsWith(&quot;orb&quot;, dir) then</text>
<text text-anchor="middle" x="2403" y="-654.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;s:chat(a.cyan(&quot;Weave: &quot; .. dir))</text>
<text text-anchor="middle" x="2403" y="-638.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return weave_dir(weaver, dir, 0)</text>
<text text-anchor="middle" x="2403" y="-623.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2403" y="-608.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2403" y="-576.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return false</text>
<text text-anchor="middle" x="2403" y="-561.2008" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="2403" y="-529.8008" font-family="Inconsolata" font-size="14.00" fill="#000000">W.weave_all = weave_all</text>
</g>
<!-- codeblock_23&#45;&gt;leaf_30 -->
<g id="edge30" class="edge">
<title>codeblock_23&#45;&gt;leaf_30</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2197.29,-1874.1728C2209.627,-1822.034 2246.8494,-1664.725 2286.3024,-1497.9885"/>
<polygon fill="#000000" stroke="#000000" points="2289.7659,-1498.551 2288.6627,-1488.0137 2282.954,-1496.9391 2289.7659,-1498.551"/>
</g>
<!-- leaf_26 -->
<g id="node27" class="node">
<title>leaf_26</title>
<polygon fill="none" stroke="#c0c0c0" points="1438,-316.4019 1310,-316.4019 1310,-260.5989 1438,-260.5989 1438,-316.4019"/>
<text text-anchor="middle" x="1374" y="-269.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;Stripped down:</text>
</g>
<!-- raw_25&#45;&gt;leaf_26 -->
<g id="edge26" class="edge">
<title>raw_25&#45;&gt;leaf_26</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1448.2514,-986.7542C1445.4797,-922.9901 1434.815,-702.4126 1413,-521.6007 1404.6383,-452.2956 1390.1656,-372.1552 1381.3975,-326.1913"/>
<polygon fill="#000000" stroke="#000000" points="1384.8343,-325.5289 1379.5111,-316.3684 1377.9599,-326.8491 1384.8343,-325.5289"/>
</g>
<!-- leaf_28 -->
<g id="node29" class="node">
<title>leaf_28</title>
<polygon fill="none" stroke="#c0c0c0" points="1738,-308.4025 1456,-308.4025 1456,-268.5983 1738,-268.5983 1738,-308.4025"/>
<text text-anchor="middle" x="1597" y="-277.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#45; [ ] #todo add error checking here.</text>
</g>
<!-- raw_27&#45;&gt;leaf_28 -->
<g id="edge28" class="edge">
<title>raw_27&#45;&gt;leaf_28</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1521.7217,-986.751C1524.404,-922.9759 1534.808,-702.3668 1557,-521.6007 1566.0132,-448.1832 1582.1489,-362.6642 1590.9196,-318.4309"/>
<polygon fill="#000000" stroke="#000000" points="1594.4043,-318.8532 1592.9308,-308.3614 1587.5399,-317.4822 1594.4043,-318.8532"/>
</g>
<!-- leaf_34 -->
<g id="node35" class="node">
<title>leaf_34</title>
<polygon fill="none" stroke="#c0c0c0" points="2932,-1022.8016 2762,-1022.8016 2762,-986.8016 2932,-986.8016 2932,-1022.8016"/>
<text text-anchor="middle" x="2847" y="-1001.3016" font-family="Inconsolata" font-size="14.00" fill="#000000">** New Weave Interface</text>
</g>
<!-- header_31&#45;&gt;leaf_34 -->
<g id="edge34" class="edge">
<title>header_31&#45;&gt;leaf_34</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2840.143,-1874.1728C2841.0227,-1762.6384 2845.6983,-1169.8336 2846.7776,-1032.9983"/>
<polygon fill="#000000" stroke="#000000" points="2850.2781,-1032.9305 2846.8572,-1022.9032 2843.2784,-1032.8752 2850.2781,-1032.9305"/>
</g>
<!-- raw_35 -->
<g id="node36" class="node">
<title>raw_35</title>
<ellipse fill="none" stroke="#000000" cx="2990" cy="-1004.8016" rx="27" ry="18"/>
<text text-anchor="middle" x="2990" y="-1000.6016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_32&#45;&gt;raw_35 -->
<g id="edge35" class="edge">
<title>prose_32&#45;&gt;raw_35</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2996.857,-1874.1728C2995.9773,-1762.6384 2991.3017,-1169.8336 2990.2224,-1032.9983"/>
<polygon fill="#000000" stroke="#000000" points="2993.7216,-1032.8752 2990.1428,-1022.9032 2986.7219,-1032.9305 2993.7216,-1032.8752"/>
</g>
<!-- header_37 -->
<g id="node38" class="node">
<title>header_37</title>
<ellipse fill="none" stroke="#000000" cx="3258" cy="-1004.8016" rx="92.8553" ry="18"/>
<text text-anchor="middle" x="3258" y="-1000.6016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : weaveDeck(deck)</text>
</g>
<!-- section_33&#45;&gt;header_37 -->
<g id="edge37" class="edge">
<title>section_33&#45;&gt;header_37</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3625.3301,-1874.2393C3592.5361,-1818.2564 3491.4268,-1642.15 3425,-1488.0025 3352.3688,-1319.4573 3288.1171,-1107.9442 3266.0931,-1032.8334"/>
<polygon fill="#000000" stroke="#000000" points="3269.431,-1031.7776 3263.2691,-1023.1589 3262.7114,-1033.7391 3269.431,-1031.7776"/>
</g>
<!-- prose_38 -->
<g id="node39" class="node">
<title>prose_38</title>
<ellipse fill="none" stroke="#000000" cx="3466" cy="-1004.8016" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="3466" y="-1000.6016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_33&#45;&gt;prose_38 -->
<g id="edge38" class="edge">
<title>section_33&#45;&gt;prose_38</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3631.1675,-1874.2834C3616.1165,-1817.714 3569.336,-1638.4726 3540,-1488.0025 3506.4882,-1316.1142 3478.9212,-1107.3787 3469.489,-1032.8798"/>
<polygon fill="#000000" stroke="#000000" points="3472.9522,-1032.3671 3468.2304,-1022.8826 3466.007,-1033.2415 3472.9522,-1032.3671"/>
</g>
<!-- codeblock_39 -->
<g id="node40" class="node">
<title>codeblock_39</title>
<ellipse fill="none" stroke="#000000" cx="3636" cy="-1004.8016" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="3636" y="-1000.6016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 164&#45;190</text>
</g>
<!-- section_33&#45;&gt;codeblock_39 -->
<g id="edge39" class="edge">
<title>section_33&#45;&gt;codeblock_39</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3636,-1874.1728C3636,-1762.6384 3636,-1169.8336 3636,-1032.9983"/>
<polygon fill="#000000" stroke="#000000" points="3639.5001,-1032.9031 3636,-1022.9032 3632.5001,-1032.9032 3639.5001,-1032.9031"/>
</g>
<!-- codeblock_40 -->
<g id="node41" class="node">
<title>codeblock_40</title>
<ellipse fill="none" stroke="#000000" cx="3932" cy="-1004.8016" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="3932" y="-1000.6016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 192&#45;197</text>
</g>
<!-- section_33&#45;&gt;codeblock_40 -->
<g id="edge40" class="edge">
<title>section_33&#45;&gt;codeblock_40</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3642.0468,-1874.1728C3679.2832,-1762.5265 3877.3552,-1168.6439 3922.7327,-1032.588"/>
<polygon fill="#000000" stroke="#000000" points="3926.119,-1033.4968 3925.9628,-1022.9032 3919.4786,-1031.2821 3926.119,-1033.4968"/>
</g>
<!-- codeblock_41 -->
<g id="node42" class="node">
<title>codeblock_41</title>
<ellipse fill="none" stroke="#000000" cx="4226" cy="-1004.8016" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="4226" y="-1000.6016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 199&#45;206</text>
</g>
<!-- section_33&#45;&gt;codeblock_41 -->
<g id="edge41" class="edge">
<title>section_33&#45;&gt;codeblock_41</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3658.0686,-1874.848C3722.9051,-1822.5731 3915.3161,-1660.2106 4028,-1488.0025 4131.116,-1330.4164 4197.2576,-1110.4158 4218.5343,-1033.0533"/>
<polygon fill="#000000" stroke="#000000" points="4221.9928,-1033.6731 4221.238,-1023.1052 4215.2378,-1031.8372 4221.9928,-1033.6731"/>
</g>
<!-- codeblock_42 -->
<g id="node43" class="node">
<title>codeblock_42</title>
<ellipse fill="none" stroke="#000000" cx="4521" cy="-1004.8016" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="4521" y="-1000.6016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 208&#45;210</text>
</g>
<!-- section_33&#45;&gt;codeblock_42 -->
<g id="edge42" class="edge">
<title>section_33&#45;&gt;codeblock_42</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3680.2995,-1877.6016C3800.0931,-1835.7327 4134.0528,-1704.7059 4322,-1488.0025 4446.3026,-1344.6815 4500.3129,-1113.0956 4515.9278,-1033.0696"/>
<polygon fill="#000000" stroke="#000000" points="4519.3693,-1033.7071 4517.8018,-1023.2289 4512.4928,-1032.3976 4519.3693,-1033.7071"/>
</g>
<!-- leaf_36 -->
<g id="node37" class="node">
<title>leaf_36</title>
<polygon fill="none" stroke="#c0c0c0" points="3132,-324.4015 2780,-324.4015 2780,-252.5992 3132,-252.5992 3132,-324.4015"/>
<text text-anchor="middle" x="2956" y="-277.0004" font-family="Inconsolata" font-size="14.00" fill="#000000">Time to bring the weaver up to modern standards.</text>
</g>
<!-- raw_35&#45;&gt;leaf_36 -->
<g id="edge36" class="edge">
<title>raw_35&#45;&gt;leaf_36</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2989.1425,-986.737C2984.762,-894.4499 2964.8296,-474.5199 2958.1723,-334.265"/>
<polygon fill="#000000" stroke="#000000" points="2961.6681,-334.0931 2957.6979,-324.2703 2954.676,-334.425 2961.6681,-334.0931"/>
</g>
<!-- leaf_43 -->
<g id="node44" class="node">
<title>leaf_43</title>
<polygon fill="none" stroke="#c0c0c0" points="3299.5,-306.5004 3150.5,-306.5004 3150.5,-270.5004 3299.5,-270.5004 3299.5,-306.5004"/>
<text text-anchor="middle" x="3225" y="-285.0004" font-family="Inconsolata" font-size="14.00" fill="#000000">*** weaveDeck(deck)</text>
</g>
<!-- header_37&#45;&gt;leaf_43 -->
<g id="edge43" class="edge">
<title>header_37&#45;&gt;leaf_43</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3257.1678,-986.737C3252.7184,-890.1595 3231.7385,-434.767 3226.2935,-316.5782"/>
<polygon fill="#000000" stroke="#000000" points="3229.7866,-316.3445 3225.83,-306.5162 3222.794,-316.6667 3229.7866,-316.3445"/>
</g>
<!-- raw_44 -->
<g id="node45" class="node">
<title>raw_44</title>
<ellipse fill="none" stroke="#000000" cx="3345" cy="-288.5004" rx="27" ry="18"/>
<text text-anchor="middle" x="3345" y="-284.3004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_38&#45;&gt;raw_44 -->
<g id="edge44" class="edge">
<title>prose_38&#45;&gt;raw_44</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3462.9485,-986.737C3446.6343,-890.1595 3369.7078,-434.767 3349.743,-316.5782"/>
<polygon fill="#000000" stroke="#000000" points="3353.1601,-315.7935 3348.0433,-306.5162 3346.2579,-316.9595 3353.1601,-315.7935"/>
</g>
<!-- leaf_46 -->
<g id="node47" class="node">
<title>leaf_46</title>
<polygon fill="none" stroke="#c0c0c0" points="3882,-485.7012 3390,-485.7012 3390,-91.2996 3882,-91.2996 3882,-485.7012"/>
<text text-anchor="middle" x="3636" y="-470.4007" font-family="Inconsolata" font-size="14.00" fill="#000000">local function weaveDeck(weaver, deck)</text>
<text text-anchor="middle" x="3636" y="-455.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local dir = deck.dir</text>
<text text-anchor="middle" x="3636" y="-439.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local codex = deck.codex</text>
<text text-anchor="middle" x="3636" y="-424.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local orbDir = codex.orb</text>
<text text-anchor="middle" x="3636" y="-408.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local docMdDir = codex.docMdDir</text>
<text text-anchor="middle" x="3636" y="-393.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; #todo load .deck file here</text>
<text text-anchor="middle" x="3636" y="-378.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for i, sub in ipairs(deck) do</text>
<text text-anchor="middle" x="3636" y="-362.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;weaveDeck(weaver, sub)</text>
<text text-anchor="middle" x="3636" y="-347.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3636" y="-331.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for name, doc in pairs(deck.docs) do</text>
<text text-anchor="middle" x="3636" y="-316.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local woven, ext = weaver:weaveMd(doc)</text>
<text text-anchor="middle" x="3636" y="-301.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if woven then</text>
<text text-anchor="middle" x="3636" y="-285.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; add to docMds</text>
<text text-anchor="middle" x="3636" y="-270.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local docMdPath = Path(name):subFor(orbDir, docDir, ext)</text>
<text text-anchor="middle" x="3636" y="-254.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;s:verb(&quot;wove: &quot; .. name)</text>
<text text-anchor="middle" x="3636" y="-239.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;s:verb(&quot;into: &#160;&#160;&#160;&quot; .. tostring(docMdPath))</text>
<text text-anchor="middle" x="3636" y="-224.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;deck.docMds[docMdPath] = woven</text>
<text text-anchor="middle" x="3636" y="-208.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;codex.docMds[docMdPath] = woven</text>
<text text-anchor="middle" x="3636" y="-193.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3636" y="-161.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3636" y="-146.4001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return deck.docMds</text>
<text text-anchor="middle" x="3636" y="-131.0001" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="3636" y="-99.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">W.weaveDeck = weaveDeck</text>
</g>
<!-- codeblock_39&#45;&gt;leaf_46 -->
<g id="edge46" class="edge">
<title>codeblock_39&#45;&gt;leaf_46</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3636,-986.737C3636,-919.2111 3636,-676.2735 3636,-495.8288"/>
<polygon fill="#000000" stroke="#000000" points="3639.5001,-495.6633 3636,-485.6633 3632.5001,-495.6633 3639.5001,-495.6633"/>
</g>
<!-- leaf_47 -->
<g id="node48" class="node">
<title>leaf_47</title>
<polygon fill="none" stroke="#c0c0c0" points="4168,-323.1017 3900,-323.1017 3900,-253.8991 4168,-253.8991 4168,-323.1017"/>
<text text-anchor="middle" x="4034" y="-308.1005" font-family="Inconsolata" font-size="14.00" fill="#000000">function W.weaveCodex(weaver, codex)</text>
<text text-anchor="middle" x="4034" y="-292.7004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local orb = codex.orb</text>
<text text-anchor="middle" x="4034" y="-277.3004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;weaveDeck(weaver, orb)</text>
<text text-anchor="middle" x="4034" y="-261.9004" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_40&#45;&gt;leaf_47 -->
<g id="edge47" class="edge">
<title>codeblock_40&#45;&gt;leaf_47</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3934.5724,-986.737C3947.7441,-894.238 4007.786,-472.5897 4027.6202,-333.3033"/>
<polygon fill="#000000" stroke="#000000" points="4031.0875,-333.78 4029.0323,-323.3864 4024.1574,-332.7931 4031.0875,-333.78"/>
</g>
<!-- leaf_48 -->
<g id="node49" class="node">
<title>leaf_48</title>
<polygon fill="none" stroke="#c0c0c0" points="4468,-339.1013 4186,-339.1013 4186,-237.8995 4468,-237.8995 4468,-339.1013"/>
<text text-anchor="middle" x="4327" y="-324.1005" font-family="Inconsolata" font-size="14.00" fill="#000000">local function new(Weaver, doc)</text>
<text text-anchor="middle" x="4327" y="-308.7004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local weaver = setmetatable({}, W)</text>
<text text-anchor="middle" x="4327" y="-261.3004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return weaver</text>
<text text-anchor="middle" x="4327" y="-245.9004" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_41&#45;&gt;leaf_48 -->
<g id="edge48" class="edge">
<title>codeblock_41&#45;&gt;leaf_48</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4228.5472,-986.737C4241.1218,-897.5563 4296.8371,-502.4188 4318.4193,-349.3556"/>
<polygon fill="#000000" stroke="#000000" points="4321.9214,-349.5856 4319.852,-339.1949 4314.99,-348.6082 4321.9214,-349.5856"/>
</g>
<!-- leaf_49 -->
<g id="node50" class="node">
<title>leaf_49</title>
<polygon fill="none" stroke="#c0c0c0" points="4558,-306.5004 4486,-306.5004 4486,-270.5004 4558,-270.5004 4558,-306.5004"/>
<text text-anchor="middle" x="4522" y="-285.0004" font-family="Inconsolata" font-size="14.00" fill="#000000">return W</text>
</g>
<!-- codeblock_42&#45;&gt;leaf_49 -->
<g id="edge49" class="edge">
<title>codeblock_42&#45;&gt;leaf_49</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4521.0252,-986.737C4521.16,-890.1595 4521.7958,-434.767 4521.9608,-316.5782"/>
<polygon fill="#000000" stroke="#000000" points="4525.4608,-316.5211 4521.9748,-306.5162 4518.4608,-316.5113 4525.4608,-316.5211"/>
</g>
<!-- leaf_45 -->
<g id="node46" class="node">
<title>leaf_45</title>
<polygon fill="none" stroke="#c0c0c0" points="3517.5,-55.6015 3172.5,-55.6015 3172.5,.2015 3517.5,.2015 3517.5,-55.6015"/>
<text text-anchor="middle" x="3345" y="-8.2" font-family="Inconsolata" font-size="14.00" fill="#000000">This takes a properly cased deck and weaves it.</text>
</g>
<!-- raw_44&#45;&gt;leaf_45 -->
<g id="edge45" class="edge">
<title>raw_44&#45;&gt;leaf_45</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3345,-270.1614C3345,-227.8108 3345,-122.4854 3345,-65.5933"/>
<polygon fill="#000000" stroke="#000000" points="3348.5001,-65.56 3345,-55.56 3341.5001,-65.56 3348.5001,-65.56"/>
</g>
</g>
</svg>
