<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: lpegNode Pages: 1 -->
<svg width="3038pt" height="2054pt"
 viewBox="0.00 0.00 3038.00 2054.40" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 2050.403)">
<title>lpegNode</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-2050.403 3034,-2050.403 3034,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="656" cy="-2028.403" rx="46.9581" ry="18"/>
<text text-anchor="middle" x="656" y="-2024.203" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 167</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="656" cy="-1956.403" rx="60.9826" ry="18"/>
<text text-anchor="middle" x="656" y="-1952.203" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;66</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M656,-2010.2344C656,-2002.534 656,-1993.3773 656,-1984.8196"/>
<polygon fill="#000000" stroke="#000000" points="659.5001,-1984.8162 656,-1974.8163 652.5001,-1984.8163 659.5001,-1984.8162"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="392" cy="-1884.403" rx="49.5296" ry="18"/>
<text text-anchor="middle" x="392" y="-1880.203" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">1 : Weave</text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M609.453,-1944.6869C567.8117,-1934.0761 505.1665,-1917.7936 451,-1902.403 447.3881,-1901.3767 443.6588,-1900.2939 439.912,-1899.1893"/>
<polygon fill="#000000" stroke="#000000" points="440.6052,-1895.7437 430.022,-1896.2383 438.6037,-1902.4515 440.6052,-1895.7437"/>
</g>
<!-- prose_3 -->
<g id="node4" class="node">
<title>prose_3</title>
<ellipse fill="none" stroke="#000000" cx="492" cy="-1884.403" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="492" y="-1880.203" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;prose_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M621.6202,-1941.3094C593.8097,-1929.0999 554.8158,-1911.9807 526.8739,-1899.7135"/>
<polygon fill="#000000" stroke="#000000" points="528.0513,-1896.408 517.4879,-1895.5928 525.2374,-1902.8175 528.0513,-1896.408"/>
</g>
<!-- prose_4 -->
<g id="node5" class="node">
<title>prose_4</title>
<ellipse fill="none" stroke="#000000" cx="574" cy="-1884.403" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="574" y="-1880.203" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;prose_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M636.5671,-1939.34C625.3006,-1929.4474 610.9965,-1916.8877 598.9098,-1906.275"/>
<polygon fill="#000000" stroke="#000000" points="601.1653,-1903.5977 591.3415,-1899.6297 596.5466,-1908.8578 601.1653,-1903.5977"/>
</g>
<!-- prose_5 -->
<g id="node6" class="node">
<title>prose_5</title>
<ellipse fill="none" stroke="#000000" cx="656" cy="-1884.403" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="656" y="-1880.203" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;prose_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M656,-1938.2344C656,-1930.534 656,-1921.3773 656,-1912.8196"/>
<polygon fill="#000000" stroke="#000000" points="659.5001,-1912.8162 656,-1902.8163 652.5001,-1912.8163 659.5001,-1912.8162"/>
</g>
<!-- codeblock_6 -->
<g id="node7" class="node">
<title>codeblock_6</title>
<ellipse fill="none" stroke="#000000" cx="818" cy="-1884.403" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="818" y="-1880.203" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 10&#45;58</text>
</g>
<!-- section_1&#45;&gt;codeblock_6 -->
<g id="edge6" class="edge">
<title>section_1&#45;&gt;codeblock_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M689.9605,-1941.3094C713.924,-1930.659 746.2933,-1916.2726 772.4897,-1904.6298"/>
<polygon fill="#000000" stroke="#000000" points="774.118,-1907.7363 781.8347,-1900.4765 771.275,-1901.3396 774.118,-1907.7363"/>
</g>
<!-- codeblock_7 -->
<g id="node8" class="node">
<title>codeblock_7</title>
<ellipse fill="none" stroke="#000000" cx="1083" cy="-1884.403" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1083" y="-1880.203" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 60&#45;64</text>
</g>
<!-- section_1&#45;&gt;codeblock_7 -->
<g id="edge7" class="edge">
<title>section_1&#45;&gt;codeblock_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M709.2165,-1947.4297C785.129,-1934.6295 924.7521,-1911.0865 1010.1924,-1896.6797"/>
<polygon fill="#000000" stroke="#000000" points="1010.8001,-1900.1267 1020.079,-1895.0126 1009.6362,-1893.2241 1010.8001,-1900.1267"/>
</g>
<!-- section_8 -->
<g id="node9" class="node">
<title>section_8</title>
<ellipse fill="none" stroke="#000000" cx="1637" cy="-1884.403" rx="70.655" ry="18"/>
<text text-anchor="middle" x="1637" y="-1880.203" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 67&#45;167</text>
</g>
<!-- section_1&#45;&gt;section_8 -->
<g id="edge8" class="edge">
<title>section_1&#45;&gt;section_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M715.1567,-1952.0612C884.0641,-1939.6643 1368.598,-1904.1022 1558.9142,-1890.1341"/>
<polygon fill="#000000" stroke="#000000" points="1559.3994,-1893.608 1569.1163,-1889.3853 1558.8869,-1886.6267 1559.3994,-1893.608"/>
</g>
<!-- leaf_9 -->
<g id="node10" class="node">
<title>leaf_9</title>
<polygon fill="none" stroke="#c0c0c0" points="424.5,-1480.1024 359.5,-1480.1024 359.5,-1444.1024 424.5,-1444.1024 424.5,-1480.1024"/>
<text text-anchor="middle" x="392" y="-1458.6024" font-family="Inconsolata" font-size="14.00" fill="#000000">* Weave</text>
</g>
<!-- header_2&#45;&gt;leaf_9 -->
<g id="edge9" class="edge">
<title>header_2&#45;&gt;leaf_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M392,-1866.2573C392,-1800.0644 392,-1571.2545 392,-1490.5526"/>
<polygon fill="#000000" stroke="#000000" points="395.5001,-1490.1805 392,-1480.1805 388.5001,-1490.1805 395.5001,-1490.1805"/>
</g>
<!-- raw_10 -->
<g id="node11" class="node">
<title>raw_10</title>
<ellipse fill="none" stroke="#000000" cx="481" cy="-1462.1024" rx="27" ry="18"/>
<text text-anchor="middle" x="481" y="-1457.9024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_3&#45;&gt;raw_10 -->
<g id="edge10" class="edge">
<title>prose_3&#45;&gt;raw_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M491.5273,-1866.2573C489.8032,-1800.0644 483.8432,-1571.2545 481.7411,-1490.5526"/>
<polygon fill="#000000" stroke="#000000" points="485.2302,-1490.086 481.4709,-1480.1805 478.2326,-1490.2683 485.2302,-1490.086"/>
</g>
<!-- raw_12 -->
<g id="node13" class="node">
<title>raw_12</title>
<ellipse fill="none" stroke="#000000" cx="564" cy="-1462.1024" rx="27" ry="18"/>
<text text-anchor="middle" x="564" y="-1457.9024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_4&#45;&gt;raw_12 -->
<g id="edge12" class="edge">
<title>prose_4&#45;&gt;raw_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M573.5703,-1866.2573C572.0029,-1800.0644 566.5847,-1571.2545 564.6737,-1490.5526"/>
<polygon fill="#000000" stroke="#000000" points="568.1639,-1490.0948 564.4281,-1480.1805 561.1659,-1490.2606 568.1639,-1490.0948"/>
</g>
<!-- raw_14 -->
<g id="node15" class="node">
<title>raw_14</title>
<ellipse fill="none" stroke="#000000" cx="636" cy="-1462.1024" rx="27" ry="18"/>
<text text-anchor="middle" x="636" y="-1457.9024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_5&#45;&gt;raw_14 -->
<g id="edge14" class="edge">
<title>prose_5&#45;&gt;raw_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M655.1406,-1866.2573C652.0058,-1800.0644 641.1694,-1571.2545 637.3474,-1490.5526"/>
<polygon fill="#000000" stroke="#000000" points="640.8254,-1490.0037 636.8562,-1480.1805 633.8332,-1490.3349 640.8254,-1490.0037"/>
</g>
<!-- leaf_16 -->
<g id="node17" class="node">
<title>leaf_16</title>
<polygon fill="none" stroke="#c0c0c0" points="1040.5,-1830.2037 681.5,-1830.2037 681.5,-1094.0011 1040.5,-1094.0011 1040.5,-1830.2037"/>
<text text-anchor="middle" x="861" y="-1815.203" font-family="Inconsolata" font-size="14.00" fill="#000000">local L = require &quot;lpeg&quot;</text>
<text text-anchor="middle" x="861" y="-1783.803" font-family="Inconsolata" font-size="14.00" fill="#000000">local pl_mini = require &quot;util/plmini&quot;</text>
<text text-anchor="middle" x="861" y="-1768.4029" font-family="Inconsolata" font-size="14.00" fill="#000000">local getfiles = pl_mini.dir.getfiles</text>
<text text-anchor="middle" x="861" y="-1753.0029" font-family="Inconsolata" font-size="14.00" fill="#000000">local makepath = pl_mini.dir.makepath</text>
<text text-anchor="middle" x="861" y="-1737.6029" font-family="Inconsolata" font-size="14.00" fill="#000000">local getdirectories = pl_mini.dir.getdirectories</text>
<text text-anchor="middle" x="861" y="-1722.2028" font-family="Inconsolata" font-size="14.00" fill="#000000">local extension = pl_mini.path.extension</text>
<text text-anchor="middle" x="861" y="-1706.8028" font-family="Inconsolata" font-size="14.00" fill="#000000">local dirname = pl_mini.path.dirname</text>
<text text-anchor="middle" x="861" y="-1691.4028" font-family="Inconsolata" font-size="14.00" fill="#000000">local basename = pl_mini.path.basename</text>
<text text-anchor="middle" x="861" y="-1676.0027" font-family="Inconsolata" font-size="14.00" fill="#000000">local read = pl_mini.file.read</text>
<text text-anchor="middle" x="861" y="-1660.6027" font-family="Inconsolata" font-size="14.00" fill="#000000">local write = pl_mini.file.write</text>
<text text-anchor="middle" x="861" y="-1645.2027" font-family="Inconsolata" font-size="14.00" fill="#000000">local isdir = pl_mini.path.isdir</text>
<text text-anchor="middle" x="861" y="-1613.8027" font-family="Inconsolata" font-size="14.00" fill="#000000">local u = {}</text>
<text text-anchor="middle" x="861" y="-1598.4026" font-family="Inconsolata" font-size="14.00" fill="#000000">function u.inherit(meta)</text>
<text text-anchor="middle" x="861" y="-1583.0026" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local MT = meta or {}</text>
<text text-anchor="middle" x="861" y="-1567.6026" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local M = setmetatable({}, MT)</text>
<text text-anchor="middle" x="861" y="-1552.2025" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;M.__index = M</text>
<text text-anchor="middle" x="861" y="-1536.8025" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local m = setmetatable({}, M)</text>
<text text-anchor="middle" x="861" y="-1521.4025" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;m.__index = m</text>
<text text-anchor="middle" x="861" y="-1506.0024" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return M, m</text>
<text text-anchor="middle" x="861" y="-1490.6024" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="861" y="-1475.2024" font-family="Inconsolata" font-size="14.00" fill="#000000">function u.export(mod, constructor)</text>
<text text-anchor="middle" x="861" y="-1459.8023" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;mod.__call = constructor</text>
<text text-anchor="middle" x="861" y="-1444.4023" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return setmetatable({}, mod)</text>
<text text-anchor="middle" x="861" y="-1429.0023" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="861" y="-1397.6022" font-family="Inconsolata" font-size="14.00" fill="#000000">local a = require &quot;singletons/anterm&quot;</text>
<text text-anchor="middle" x="861" y="-1350.2022" font-family="Inconsolata" font-size="14.00" fill="#000000">local s = require &quot;singletons/status&quot; ()</text>
<text text-anchor="middle" x="861" y="-1334.8022" font-family="Inconsolata" font-size="14.00" fill="#000000">s.verbose = false</text>
<text text-anchor="middle" x="861" y="-1303.4022" font-family="Inconsolata" font-size="14.00" fill="#000000">local m = require &quot;orb:Orbit/morphemes&quot;</text>
<text text-anchor="middle" x="861" y="-1288.0021" font-family="Inconsolata" font-size="14.00" fill="#000000">local walk = require &quot;orb:walk/walk&quot;</text>
<text text-anchor="middle" x="861" y="-1272.6021" font-family="Inconsolata" font-size="14.00" fill="#000000">local strHas = walk.strHas</text>
<text text-anchor="middle" x="861" y="-1257.2021" font-family="Inconsolata" font-size="14.00" fill="#000000">local endsWith = walk.endsWith</text>
<text text-anchor="middle" x="861" y="-1241.802" font-family="Inconsolata" font-size="14.00" fill="#000000">local subLastFor = walk.subLastFor</text>
<text text-anchor="middle" x="861" y="-1226.402" font-family="Inconsolata" font-size="14.00" fill="#000000">local writeOnChange = walk.writeOnChange</text>
<text text-anchor="middle" x="861" y="-1211.002" font-family="Inconsolata" font-size="14.00" fill="#000000">local Path = require &quot;walk/path&quot;</text>
<text text-anchor="middle" x="861" y="-1195.6019" font-family="Inconsolata" font-size="14.00" fill="#000000">local Dir = require &quot;walk/directory&quot;</text>
<text text-anchor="middle" x="861" y="-1180.2019" font-family="Inconsolata" font-size="14.00" fill="#000000">local File = require &quot;walk/file&quot;</text>
<text text-anchor="middle" x="861" y="-1164.8019" font-family="Inconsolata" font-size="14.00" fill="#000000">local epeg = require &quot;orb:util/epeg&quot;</text>
<text text-anchor="middle" x="861" y="-1133.4018" font-family="Inconsolata" font-size="14.00" fill="#000000">local Doc = require &quot;Orbit/doc&quot;</text>
<text text-anchor="middle" x="861" y="-1102.0018" font-family="Inconsolata" font-size="14.00" fill="#000000">local W, w = u.inherit()</text>
</g>
<!-- codeblock_6&#45;&gt;leaf_16 -->
<g id="edge16" class="edge">
<title>codeblock_6&#45;&gt;leaf_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M819.8477,-1866.2573C820.5542,-1859.3183 821.4427,-1850.5922 822.4768,-1840.437"/>
<polygon fill="#000000" stroke="#000000" points="825.9805,-1840.5776 823.5115,-1830.2744 819.0165,-1839.8684 825.9805,-1840.5776"/>
</g>
<!-- leaf_17 -->
<g id="node18" class="node">
<title>leaf_17</title>
<polygon fill="none" stroke="#c0c0c0" points="1291.5,-1489.3029 1058.5,-1489.3029 1058.5,-1434.9019 1291.5,-1434.9019 1291.5,-1489.3029"/>
<text text-anchor="middle" x="1175" y="-1474.0024" font-family="Inconsolata" font-size="14.00" fill="#000000">function W.weaveMd(weaver, doc)</text>
<text text-anchor="middle" x="1175" y="-1458.6024" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return doc:toMarkdown()</text>
<text text-anchor="middle" x="1175" y="-1443.2024" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_7&#45;&gt;leaf_17 -->
<g id="edge17" class="edge">
<title>codeblock_7&#45;&gt;leaf_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1086.9531,-1866.2573C1100.8836,-1802.3132 1147.8747,-1586.6135 1166.9011,-1499.2783"/>
<polygon fill="#000000" stroke="#000000" points="1170.3697,-1499.7987 1169.0786,-1489.2828 1163.5301,-1498.3086 1170.3697,-1499.7987"/>
</g>
<!-- header_18 -->
<g id="node19" class="node">
<title>header_18</title>
<ellipse fill="none" stroke="#000000" cx="1375" cy="-1462.1024" rx="65.81" ry="18"/>
<text text-anchor="middle" x="1375" y="-1457.9024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : .dot to .svg</text>
</g>
<!-- section_8&#45;&gt;header_18 -->
<g id="edge18" class="edge">
<title>section_8&#45;&gt;header_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1578.1121,-1874.2523C1530.076,-1864.7748 1467.4168,-1849.2764 1450,-1830.403 1360.1066,-1732.9917 1365.6501,-1558.2794 1371.7734,-1490.2732"/>
<polygon fill="#000000" stroke="#000000" points="1375.2585,-1490.5957 1372.7466,-1480.3029 1368.2916,-1489.9156 1375.2585,-1490.5957"/>
</g>
<!-- prose_19 -->
<g id="node20" class="node">
<title>prose_19</title>
<ellipse fill="none" stroke="#000000" cx="1491" cy="-1462.1024" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1491" y="-1457.9024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_8&#45;&gt;prose_19 -->
<g id="edge19" class="edge">
<title>section_8&#45;&gt;prose_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1588.9729,-1871.0778C1568.1186,-1862.7949 1545.4333,-1849.899 1532,-1830.403 1458.3483,-1723.5111 1475.3257,-1556.3301 1485.8243,-1490.2942"/>
<polygon fill="#000000" stroke="#000000" points="1489.3094,-1490.673 1487.5007,-1480.2337 1482.4046,-1489.5224 1489.3094,-1490.673"/>
</g>
<!-- prose_20 -->
<g id="node21" class="node">
<title>prose_20</title>
<ellipse fill="none" stroke="#000000" cx="1573" cy="-1462.1024" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1573" y="-1457.9024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_8&#45;&gt;prose_20 -->
<g id="edge20" class="edge">
<title>section_8&#45;&gt;prose_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1628.1855,-1866.3306C1623.5371,-1856.0355 1618.1583,-1842.761 1615,-1830.403 1583.3568,-1706.5872 1575.533,-1553.2515 1573.6153,-1490.6923"/>
<polygon fill="#000000" stroke="#000000" points="1577.1066,-1490.3304 1573.3298,-1480.4317 1570.1094,-1490.5252 1577.1066,-1490.3304"/>
</g>
<!-- codeblock_21 -->
<g id="node22" class="node">
<title>codeblock_21</title>
<ellipse fill="none" stroke="#000000" cx="1701" cy="-1462.1024" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1701" y="-1457.9024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 73&#45;85</text>
</g>
<!-- section_8&#45;&gt;codeblock_21 -->
<g id="edge21" class="edge">
<title>section_8&#45;&gt;codeblock_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1639.75,-1866.2573C1649.7816,-1800.0644 1684.4579,-1571.2545 1696.6883,-1490.5526"/>
<polygon fill="#000000" stroke="#000000" points="1700.2223,-1490.5921 1698.2602,-1480.1805 1693.3013,-1489.5431 1700.2223,-1490.5921"/>
</g>
<!-- codeblock_22 -->
<g id="node23" class="node">
<title>codeblock_22</title>
<ellipse fill="none" stroke="#000000" cx="2089" cy="-1462.1024" rx="82.2579" ry="18"/>
<text text-anchor="middle" x="2089" y="-1457.9024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 89&#45;152</text>
</g>
<!-- section_8&#45;&gt;codeblock_22 -->
<g id="edge22" class="edge">
<title>section_8&#45;&gt;codeblock_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1690.6493,-1872.6297C1720.8519,-1864.2311 1758.1721,-1850.7568 1787,-1830.403 1925.0608,-1732.9257 2035.1708,-1556.3353 2073.9584,-1489.0913"/>
<polygon fill="#000000" stroke="#000000" points="2077.0318,-1490.7673 2078.9536,-1480.3482 2070.9538,-1487.2947 2077.0318,-1490.7673"/>
</g>
<!-- codeblock_23 -->
<g id="node24" class="node">
<title>codeblock_23</title>
<ellipse fill="none" stroke="#000000" cx="2538" cy="-1462.1024" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="2538" y="-1457.9024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 155&#45;162</text>
</g>
<!-- section_8&#45;&gt;codeblock_23 -->
<g id="edge23" class="edge">
<title>section_8&#45;&gt;codeblock_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1707.48,-1883.3504C1834.9797,-1880.4752 2098.2952,-1869.8055 2180,-1830.403 2346.0339,-1750.3324 2477.358,-1559.4252 2521.7661,-1488.8914"/>
<polygon fill="#000000" stroke="#000000" points="2524.9011,-1490.4783 2527.2173,-1480.1398 2518.9594,-1486.7774 2524.9011,-1490.4783"/>
</g>
<!-- codeblock_24 -->
<g id="node25" class="node">
<title>codeblock_24</title>
<ellipse fill="none" stroke="#000000" cx="2862" cy="-1462.1024" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="2862" y="-1457.9024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 164&#45;166</text>
</g>
<!-- section_8&#45;&gt;codeblock_24 -->
<g id="edge24" class="edge">
<title>section_8&#45;&gt;codeblock_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1707.4092,-1882.3718C1928.1258,-1875.7712 2594.2332,-1853.9868 2634,-1830.403 2767.1649,-1751.4293 2833.6035,-1561.2834 2854.5157,-1489.8496"/>
<polygon fill="#000000" stroke="#000000" points="2857.891,-1490.7758 2857.2732,-1480.1989 2851.1604,-1488.8525 2857.891,-1490.7758"/>
</g>
<!-- leaf_11 -->
<g id="node12" class="node">
<title>leaf_11</title>
<polygon fill="none" stroke="#c0c0c0" points="450,-610.5021 0,-610.5021 0,-538.6997 450,-538.6997 450,-610.5021"/>
<text text-anchor="middle" x="225" y="-547.1009" font-family="Inconsolata" font-size="14.00" fill="#000000">Our weaver is currently somewhat narrowly focused on markdown.</text>
</g>
<!-- raw_10&#45;&gt;leaf_11 -->
<g id="edge11" class="edge">
<title>raw_10&#45;&gt;leaf_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M480.2388,-1443.7811C477.6393,-1389.5027 467.28,-1225.1359 433,-1093.8018 385.4995,-911.817 290.8061,-707.9938 247.5253,-619.5576"/>
<polygon fill="#000000" stroke="#000000" points="250.5554,-617.7879 243.0037,-610.3567 244.273,-620.8752 250.5554,-617.7879"/>
</g>
<!-- leaf_13 -->
<g id="node14" class="node">
<title>leaf_13</title>
<polygon fill="none" stroke="#c0c0c0" points="659.5,-594.503 468.5,-594.503 468.5,-554.6988 659.5,-554.6988 659.5,-594.503"/>
<text text-anchor="middle" x="564" y="-563.1009" font-family="Inconsolata" font-size="14.00" fill="#000000">This will change in time.</text>
</g>
<!-- raw_12&#45;&gt;leaf_13 -->
<g id="edge13" class="edge">
<title>raw_12&#45;&gt;leaf_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M564,-1443.972C564,-1332.9267 564,-744.8219 564,-604.6237"/>
<polygon fill="#000000" stroke="#000000" points="567.5001,-604.5946 564,-594.5947 560.5001,-604.5947 567.5001,-604.5946"/>
</g>
<!-- leaf_15 -->
<g id="node16" class="node">
<title>leaf_15</title>
<polygon fill="none" stroke="#c0c0c0" points="834,-594.503 678,-594.503 678,-554.6988 834,-554.6988 834,-594.503"/>
<text text-anchor="middle" x="756" y="-563.1009" font-family="Inconsolata" font-size="14.00" fill="#000000">Now to activate dot!</text>
</g>
<!-- raw_14&#45;&gt;leaf_15 -->
<g id="edge15" class="edge">
<title>raw_14&#45;&gt;leaf_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M637.3598,-1444.0447C641.4794,-1390.4912 654.6139,-1227.917 672,-1093.8018 696.2171,-906.993 735.9524,-684.0992 750.4689,-604.5901"/>
<polygon fill="#000000" stroke="#000000" points="753.9871,-604.8082 752.3457,-594.3413 747.1016,-603.5473 753.9871,-604.8082"/>
</g>
<!-- leaf_25 -->
<g id="node26" class="node">
<title>leaf_25</title>
<polygon fill="none" stroke="#c0c0c0" points="1300,-592.6009 1172,-592.6009 1172,-556.6009 1300,-556.6009 1300,-592.6009"/>
<text text-anchor="middle" x="1236" y="-571.1009" font-family="Inconsolata" font-size="14.00" fill="#000000">*** .dot to .svg</text>
</g>
<!-- header_18&#45;&gt;leaf_25 -->
<g id="edge25" class="edge">
<title>header_18&#45;&gt;leaf_25</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1371.963,-1443.9812C1362.4497,-1387.1149 1332.4629,-1207.0998 1309,-1057.8018 1281.8204,-884.8538 1251.027,-676.7669 1240.1052,-602.5595"/>
<polygon fill="#000000" stroke="#000000" points="1243.5587,-601.9867 1238.6408,-592.6025 1236.6332,-603.0053 1243.5587,-601.9867"/>
</g>
<!-- raw_26 -->
<g id="node27" class="node">
<title>raw_26</title>
<ellipse fill="none" stroke="#000000" cx="1345" cy="-574.6009" rx="27" ry="18"/>
<text text-anchor="middle" x="1345" y="-570.4009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_19&#45;&gt;raw_26 -->
<g id="edge26" class="edge">
<title>prose_19&#45;&gt;raw_26</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1494.4712,-1443.9903C1504.3916,-1386.7521 1527.42,-1206.8723 1450,-1093.8018 1430.4582,-1065.2613 1400.0178,-1086.6942 1381,-1057.8018 1284.4815,-911.1678 1321.3994,-682.507 1338.3434,-602.9913"/>
<polygon fill="#000000" stroke="#000000" points="1341.8582,-603.3033 1340.5857,-592.7852 1335.0213,-601.8011 1341.8582,-603.3033"/>
</g>
<!-- raw_28 -->
<g id="node29" class="node">
<title>raw_28</title>
<ellipse fill="none" stroke="#000000" cx="1417" cy="-574.6009" rx="27" ry="18"/>
<text text-anchor="middle" x="1417" y="-570.4009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_20&#45;&gt;raw_28 -->
<g id="edge28" class="edge">
<title>prose_20&#45;&gt;raw_28</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1576.649,-1444.2171C1587.2767,-1386.8969 1612.5946,-1205.0294 1532,-1093.8018 1509.3603,-1062.557 1475.0657,-1089.4545 1453,-1057.8018 1352.3782,-913.4626 1392.1485,-682.4226 1410.0695,-602.7119"/>
<polygon fill="#000000" stroke="#000000" points="1413.5895,-603.0254 1412.4363,-592.4935 1406.77,-601.4458 1413.5895,-603.0254"/>
</g>
<!-- leaf_30 -->
<g id="node31" class="node">
<title>leaf_30</title>
<polygon fill="none" stroke="#c0c0c0" points="1940,-663.5017 1462,-663.5017 1462,-485.7001 1940,-485.7001 1940,-663.5017"/>
<text text-anchor="middle" x="1701" y="-648.1011" font-family="Inconsolata" font-size="14.00" fill="#000000">local popen = io.popen</text>
<text text-anchor="middle" x="1701" y="-632.701" font-family="Inconsolata" font-size="14.00" fill="#000000">local function dotToSvg(dotted, out_file)</text>
<text text-anchor="middle" x="1701" y="-617.301" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local success, svg_file = pcall (popen,</text>
<text text-anchor="middle" x="1701" y="-601.901" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&quot;dot &#45;Tsvg &quot; .. tostring(out_file), &quot;r&quot;)</text>
<text text-anchor="middle" x="1701" y="-586.501" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if success then</text>
<text text-anchor="middle" x="1701" y="-571.1009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return svg_file:read(&quot;*a&quot;)</text>
<text text-anchor="middle" x="1701" y="-555.7009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else</text>
<text text-anchor="middle" x="1701" y="-540.3009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; #todo start using %d and format!</text>
<text text-anchor="middle" x="1701" y="-524.9008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;s:complain(&quot;dotError&quot;, &quot;dot failed with &quot; .. success)</text>
<text text-anchor="middle" x="1701" y="-509.5008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1701" y="-494.1008" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_21&#45;&gt;leaf_30 -->
<g id="edge30" class="edge">
<title>codeblock_21&#45;&gt;leaf_30</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1701,-1443.972C1701,-1346.4162 1701,-880.6648 1701,-673.8872"/>
<polygon fill="#000000" stroke="#000000" points="1704.5001,-673.6392 1701,-663.6393 1697.5001,-673.6393 1704.5001,-673.6392"/>
</g>
<!-- leaf_31 -->
<g id="node32" class="node">
<title>leaf_31</title>
<polygon fill="none" stroke="#c0c0c0" points="2639.5,-1058.0027 1958.5,-1058.0027 1958.5,-91.1991 2639.5,-91.1991 2639.5,-1058.0027"/>
<text text-anchor="middle" x="2299" y="-1042.6018" font-family="Inconsolata" font-size="14.00" fill="#000000">local function weave_dir(weaver, pwd, depth)</text>
<text text-anchor="middle" x="2299" y="-1027.2017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local depth = depth + 1</text>
<text text-anchor="middle" x="2299" y="-1011.8017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for dir_str in pl_mini.dir.walk(pwd, false, false) do</text>
<text text-anchor="middle" x="2299" y="-996.4017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local dir = Dir(dir_str)</text>
<text text-anchor="middle" x="2299" y="-981.0017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if not strHas(&quot;.git&quot;, dir.path.str)</text>
<text text-anchor="middle" x="2299" y="-965.6016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;and not strHas(&quot;src/lib&quot;, dir.path.str) then</text>
<text text-anchor="middle" x="2299" y="-950.2016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;dir = dir.path.str &#45;&#45; migrate this down</text>
<text text-anchor="middle" x="2299" y="-934.8016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local files = getfiles(dir)</text>
<text text-anchor="middle" x="2299" y="-919.4015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;s:verb((&quot; &#160;&quot;):rep(depth) .. &quot;* &quot; .. dir)</text>
<text text-anchor="middle" x="2299" y="-904.0015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local subdirs = getdirectories(dir)</text>
<text text-anchor="middle" x="2299" y="-888.6015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;for _, f in ipairs(files) do</text>
<text text-anchor="middle" x="2299" y="-873.2014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if extension(f) == &quot;.orb&quot; then</text>
<text text-anchor="middle" x="2299" y="-857.8014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; Weave and prepare out directory</text>
<text text-anchor="middle" x="2299" y="-842.4014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;s:verb((&quot; &#160;&quot;):rep(depth) .. &quot; &#160;&#45; &quot; .. f)</text>
<text text-anchor="middle" x="2299" y="-827.0013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local orb_f = read(f)</text>
<text text-anchor="middle" x="2299" y="-811.6013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local doc = Doc(orb_f)</text>
<text text-anchor="middle" x="2299" y="-796.2013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local doc_md_dir = subLastFor(&quot;/orb&quot;, &quot;/doc/md&quot;, dirname(f))</text>
<text text-anchor="middle" x="2299" y="-780.8012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local doc_dot_dir = subLastFor(&quot;/orb&quot;, &quot;/doc/dot&quot;, dirname(f))</text>
<text text-anchor="middle" x="2299" y="-765.4012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local doc_svg_dir = subLastFor(&quot;/orb&quot;, &quot;/doc/svg&quot;, dirname(f))</text>
<text text-anchor="middle" x="2299" y="-750.0012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;makepath(doc_md_dir)</text>
<text text-anchor="middle" x="2299" y="-734.6012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;makepath(doc_dot_dir)</text>
<text text-anchor="middle" x="2299" y="-719.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;makepath(doc_svg_dir)</text>
<text text-anchor="middle" x="2299" y="-703.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local bare_name = basename(f):sub(1, &#45;5) &#45;&#45; &#160;== #&quot;.orb&quot;</text>
<text text-anchor="middle" x="2299" y="-688.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local out_md_name = doc_md_dir .. &quot;/&quot; .. bare_name .. &quot;.md&quot;</text>
<text text-anchor="middle" x="2299" y="-673.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local out_dot_name = doc_dot_dir .. &quot;/&quot; .. bare_name .. &quot;.dot&quot;</text>
<text text-anchor="middle" x="2299" y="-657.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local out_svg_name = doc_svg_dir .. &quot;/&quot; .. bare_name .. &quot;.svg&quot;</text>
<text text-anchor="middle" x="2299" y="-642.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local woven_md = weaver:weaveMd(doc) or &quot;&quot;</text>
<text text-anchor="middle" x="2299" y="-610.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; Compare, report, and write out if necessary</text>
<text text-anchor="middle" x="2299" y="-595.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local last_md = read(out_md_name) or &quot;&quot;</text>
<text text-anchor="middle" x="2299" y="-580.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local changed_md = writeOnChange(woven_md, last_md, out_md_name, depth)</text>
<text text-anchor="middle" x="2299" y="-564.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local woven_dot = doc:dot() or &quot;&quot;</text>
<text text-anchor="middle" x="2299" y="-549.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local last_dot = read(out_dot_name) or &quot;&quot;</text>
<text text-anchor="middle" x="2299" y="-533.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local changed_dot = writeOnChange(woven_dot, last_dot, out_dot_name, depth)</text>
<text text-anchor="middle" x="2299" y="-502.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; SVG call is fairly slow and only useful of the dot has changed</text>
<text text-anchor="middle" x="2299" y="-487.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if changed_dot then</text>
<text text-anchor="middle" x="2299" y="-471.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local woven_svg = dotToSvg(woven_dot, out_dot_name)</text>
<text text-anchor="middle" x="2299" y="-456.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local last_svg = read(out_svg_name) or &quot;&quot;</text>
<text text-anchor="middle" x="2299" y="-440.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;writeOnChange(woven_svg, last_svg, out_svg_name, depth)</text>
<text text-anchor="middle" x="2299" y="-425.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2299" y="-410.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2299" y="-394.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2299" y="-379.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2299" y="-363.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2299" y="-332.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return true</text>
<text text-anchor="middle" x="2299" y="-317.0004" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="2299" y="-285.6004" font-family="Inconsolata" font-size="14.00" fill="#000000">local function weave_all(weaver, pwd)</text>
<text text-anchor="middle" x="2299" y="-270.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for dir in pl_mini.dir.walk(pwd, false, false) do</text>
<text text-anchor="middle" x="2299" y="-254.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if not strHas(&quot;.git&quot;, dir) and isdir(dir)</text>
<text text-anchor="middle" x="2299" y="-239.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;and endsWith(&quot;orb&quot;, dir) then</text>
<text text-anchor="middle" x="2299" y="-224.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;s:chat(a.cyan(&quot;Weave: &quot; .. dir))</text>
<text text-anchor="middle" x="2299" y="-208.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return weave_dir(weaver, dir, 0)</text>
<text text-anchor="middle" x="2299" y="-193.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2299" y="-177.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2299" y="-146.4001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return false</text>
<text text-anchor="middle" x="2299" y="-131.0001" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="2299" y="-99.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">W.weave_all = weave_all</text>
</g>
<!-- codeblock_22&#45;&gt;leaf_31 -->
<g id="edge31" class="edge">
<title>codeblock_22&#45;&gt;leaf_31</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2093.29,-1443.972C2105.627,-1391.8333 2142.8494,-1234.5242 2182.3024,-1067.7878"/>
<polygon fill="#000000" stroke="#000000" points="2185.7659,-1068.3503 2184.6627,-1057.813 2178.954,-1066.7384 2185.7659,-1068.3503"/>
</g>
<!-- leaf_32 -->
<g id="node33" class="node">
<title>leaf_32</title>
<polygon fill="none" stroke="#c0c0c0" points="2940,-625.2018 2658,-625.2018 2658,-524 2940,-524 2940,-625.2018"/>
<text text-anchor="middle" x="2799" y="-610.201" font-family="Inconsolata" font-size="14.00" fill="#000000">local function new(Weaver, doc)</text>
<text text-anchor="middle" x="2799" y="-594.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local weaver = setmetatable({}, W)</text>
<text text-anchor="middle" x="2799" y="-547.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return weaver</text>
<text text-anchor="middle" x="2799" y="-532.0009" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_23&#45;&gt;leaf_32 -->
<g id="edge32" class="edge">
<title>codeblock_23&#45;&gt;leaf_32</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2543.3318,-1443.972C2573.9931,-1339.7117 2728.3293,-814.9086 2781.1999,-635.1281"/>
<polygon fill="#000000" stroke="#000000" points="2784.6246,-635.8879 2784.0882,-625.3067 2777.909,-633.9129 2784.6246,-635.8879"/>
</g>
<!-- leaf_33 -->
<g id="node34" class="node">
<title>leaf_33</title>
<polygon fill="none" stroke="#c0c0c0" points="3030,-592.6009 2958,-592.6009 2958,-556.6009 3030,-556.6009 3030,-592.6009"/>
<text text-anchor="middle" x="2994" y="-571.1009" font-family="Inconsolata" font-size="14.00" fill="#000000">return W</text>
</g>
<!-- codeblock_24&#45;&gt;leaf_33 -->
<g id="edge33" class="edge">
<title>codeblock_24&#45;&gt;leaf_33</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2866.6759,-1444.1114C2881.1826,-1387.6259 2925.837,-1208.6036 2949,-1057.8018 2975.3944,-885.9616 2988.4759,-677.1967 2992.5571,-602.6846"/>
<polygon fill="#000000" stroke="#000000" points="2996.0527,-602.8589 2993.0945,-592.6855 2989.0628,-602.4832 2996.0527,-602.8589"/>
</g>
<!-- leaf_27 -->
<g id="node28" class="node">
<title>leaf_27</title>
<polygon fill="none" stroke="#c0c0c0" points="1334,-55.6015 1206,-55.6015 1206,.2015 1334,.2015 1334,-55.6015"/>
<text text-anchor="middle" x="1270" y="-8.2" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;Stripped down:</text>
</g>
<!-- raw_26&#45;&gt;leaf_27 -->
<g id="edge27" class="edge">
<title>raw_26&#45;&gt;leaf_27</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1346.6479,-556.4712C1351.9328,-491.5259 1365.0115,-265.1381 1309,-91.4 1305.9879,-82.057 1301.3468,-72.6694 1296.3035,-64.0805"/>
<polygon fill="#000000" stroke="#000000" points="1299.1988,-62.108 1290.9538,-55.4544 1293.25,-65.7975 1299.1988,-62.108"/>
</g>
<!-- leaf_29 -->
<g id="node30" class="node">
<title>leaf_29</title>
<polygon fill="none" stroke="#c0c0c0" points="1634,-47.6021 1352,-47.6021 1352,-7.7979 1634,-7.7979 1634,-47.6021"/>
<text text-anchor="middle" x="1493" y="-16.2" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#45; [ ] #todo add error checking here.</text>
</g>
<!-- raw_28&#45;&gt;leaf_29 -->
<g id="edge29" class="edge">
<title>raw_28&#45;&gt;leaf_29</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1415.2836,-556.4489C1409.7674,-491.4283 1396.0044,-264.8178 1453,-91.4 1457.0773,-78.9943 1464.0727,-66.5606 1471.0843,-56.0139"/>
<polygon fill="#000000" stroke="#000000" points="1474.0727,-57.8472 1476.9142,-47.6405 1468.3279,-53.8474 1474.0727,-57.8472"/>
</g>
</g>
</svg>
