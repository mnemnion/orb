<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: lpegNode Pages: 1 -->
<svg width="4699pt" height="2484pt"
 viewBox="0.00 0.00 4699.30 2484.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 2480.0037)">
<title>lpegNode</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-2480.0037 4695.2972,-2480.0037 4695.2972,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="768" cy="-2458.0037" rx="46.9581" ry="18"/>
<text text-anchor="middle" x="768" y="-2453.8037" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 215</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="768" cy="-2386.0037" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="768" y="-2381.8037" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;153</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M768,-2439.8351C768,-2432.1347 768,-2422.9781 768,-2414.4204"/>
<polygon fill="#000000" stroke="#000000" points="771.5001,-2414.417 768,-2404.417 764.5001,-2414.417 771.5001,-2414.417"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="416" cy="-2314.0037" rx="49.5296" ry="18"/>
<text text-anchor="middle" x="416" y="-2309.8037" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">1 : Weave</text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M712.7757,-2376.1665C656.3672,-2365.9187 566.3369,-2349.0113 489,-2332.0037 481.7313,-2330.4053 474.0794,-2328.6259 466.5754,-2326.8256"/>
<polygon fill="#000000" stroke="#000000" points="467.3842,-2323.4204 456.8405,-2324.4603 465.7314,-2330.2225 467.3842,-2323.4204"/>
</g>
<!-- prose_3 -->
<g id="node4" class="node">
<title>prose_3</title>
<ellipse fill="none" stroke="#000000" cx="530" cy="-2314.0037" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="530" y="-2309.8037" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;prose_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M720.0402,-2373.5394C681.4253,-2363.2244 625.885,-2347.7576 578,-2332.0037 574.1626,-2330.7413 570.1769,-2329.3606 566.2163,-2327.9433"/>
<polygon fill="#000000" stroke="#000000" points="567.115,-2324.5451 556.5212,-2324.3915 564.7069,-2331.1179 567.115,-2324.5451"/>
</g>
<!-- prose_4 -->
<g id="node5" class="node">
<title>prose_4</title>
<ellipse fill="none" stroke="#000000" cx="619" cy="-2314.0037" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="619" y="-2309.8037" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;prose_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M735.3013,-2370.203C710.8419,-2358.3837 677.4944,-2342.2695 652.7785,-2330.3262"/>
<polygon fill="#000000" stroke="#000000" points="654.2918,-2327.1703 643.765,-2325.9707 651.2461,-2333.473 654.2918,-2327.1703"/>
</g>
<!-- prose_5 -->
<g id="node6" class="node">
<title>prose_5</title>
<ellipse fill="none" stroke="#000000" cx="704" cy="-2314.0037" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="704" y="-2309.8037" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;prose_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M752.1798,-2368.206C744.1184,-2359.1369 734.1979,-2347.9764 725.4584,-2338.1444"/>
<polygon fill="#000000" stroke="#000000" points="728.0204,-2335.7584 718.7607,-2330.6096 722.7885,-2340.409 728.0204,-2335.7584"/>
</g>
<!-- codeblock_6 -->
<g id="node7" class="node">
<title>codeblock_6</title>
<ellipse fill="none" stroke="#000000" cx="834" cy="-2314.0037" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="834" y="-2309.8037" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 10&#45;57</text>
</g>
<!-- section_1&#45;&gt;codeblock_6 -->
<g id="edge6" class="edge">
<title>section_1&#45;&gt;codeblock_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M784.3146,-2368.206C792.3267,-2359.4655 802.1196,-2348.7824 810.8868,-2339.2182"/>
<polygon fill="#000000" stroke="#000000" points="813.4671,-2341.5829 817.6443,-2331.8463 808.307,-2336.8528 813.4671,-2341.5829"/>
</g>
<!-- codeblock_7 -->
<g id="node8" class="node">
<title>codeblock_7</title>
<ellipse fill="none" stroke="#000000" cx="1091" cy="-2314.0037" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1091" y="-2309.8037" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 59&#45;63</text>
</g>
<!-- section_1&#45;&gt;codeblock_7 -->
<g id="edge7" class="edge">
<title>section_1&#45;&gt;codeblock_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M819.1803,-2374.5951C874.8711,-2362.1811 964.087,-2342.294 1025.0066,-2328.7143"/>
<polygon fill="#000000" stroke="#000000" points="1025.9081,-2332.0994 1034.9071,-2326.5074 1024.3851,-2325.2671 1025.9081,-2332.0994"/>
</g>
<!-- section_8 -->
<g id="node9" class="node">
<title>section_8</title>
<ellipse fill="none" stroke="#000000" cx="1532" cy="-2314.0037" rx="70.655" ry="18"/>
<text text-anchor="middle" x="1532" y="-2309.8037" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 66&#45;153</text>
</g>
<!-- section_1&#45;&gt;section_8 -->
<g id="edge8" class="edge">
<title>section_1&#45;&gt;section_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M830.1974,-2380.1422C969.0635,-2367.0554 1304.0093,-2335.4898 1455.4143,-2321.2212"/>
<polygon fill="#000000" stroke="#000000" points="1455.928,-2324.6884 1465.5555,-2320.2655 1455.2712,-2317.7193 1455.928,-2324.6884"/>
</g>
<!-- section_9 -->
<g id="node10" class="node">
<title>section_9</title>
<ellipse fill="none" stroke="#000000" cx="2918" cy="-2314.0037" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="2918" y="-2309.8037" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 154&#45;158</text>
</g>
<!-- section_1&#45;&gt;section_9 -->
<g id="edge9" class="edge">
<title>section_1&#45;&gt;section_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M833.2248,-2383.8195C1144.8682,-2373.383 2481.5949,-2328.6182 2833.0631,-2316.8481"/>
<polygon fill="#000000" stroke="#000000" points="2833.2949,-2320.3424 2843.1722,-2316.5096 2833.0606,-2313.3464 2833.2949,-2320.3424"/>
</g>
<!-- leaf_10 -->
<g id="node11" class="node">
<title>leaf_10</title>
<polygon fill="none" stroke="#c0c0c0" points="446.5,-1917.7031 381.5,-1917.7031 381.5,-1881.7031 446.5,-1881.7031 446.5,-1917.7031"/>
<text text-anchor="middle" x="414" y="-1896.2032" font-family="Inconsolata" font-size="14.00" fill="#000000">* Weave</text>
</g>
<!-- header_2&#45;&gt;leaf_10 -->
<g id="edge10" class="edge">
<title>header_2&#45;&gt;leaf_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M415.9128,-2295.9354C415.5983,-2230.7838 414.5208,-2007.5888 414.1371,-1928.098"/>
<polygon fill="#000000" stroke="#000000" points="417.636,-1927.8496 414.0877,-1917.8666 410.6361,-1927.8835 417.636,-1927.8496"/>
</g>
<!-- raw_11 -->
<g id="node12" class="node">
<title>raw_11</title>
<ellipse fill="none" stroke="#000000" cx="492" cy="-1899.7031" rx="27" ry="18"/>
<text text-anchor="middle" x="492" y="-1895.5031" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_3&#45;&gt;raw_11 -->
<g id="edge11" class="edge">
<title>prose_3&#45;&gt;raw_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M528.3428,-2295.9354C522.367,-2230.7838 501.8954,-2007.5888 494.6044,-1928.098"/>
<polygon fill="#000000" stroke="#000000" points="498.0648,-1927.5051 493.666,-1917.8666 491.0941,-1928.1446 498.0648,-1927.5051"/>
</g>
<!-- raw_13 -->
<g id="node14" class="node">
<title>raw_13</title>
<ellipse fill="none" stroke="#000000" cx="564" cy="-1899.7031" rx="27" ry="18"/>
<text text-anchor="middle" x="564" y="-1895.5031" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_4&#45;&gt;raw_13 -->
<g id="edge13" class="edge">
<title>prose_4&#45;&gt;raw_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M611.5724,-2296.3168C607.5132,-2285.9212 602.7632,-2272.4212 600,-2260.0037 572.9495,-2138.4407 566.2067,-1989.2572 564.5404,-1927.9985"/>
<polygon fill="#000000" stroke="#000000" points="568.0379,-1927.8507 564.2918,-1917.9402 561.04,-1928.0237 568.0379,-1927.8507"/>
</g>
<!-- raw_15 -->
<g id="node16" class="node">
<title>raw_15</title>
<ellipse fill="none" stroke="#000000" cx="636" cy="-1899.7031" rx="27" ry="18"/>
<text text-anchor="middle" x="636" y="-1895.5031" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_5&#45;&gt;raw_15 -->
<g id="edge15" class="edge">
<title>prose_5&#45;&gt;raw_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M691.2637,-2296.9432C684.3517,-2286.7563 676.3517,-2273.2563 672,-2260.0037 633.0553,-2141.4012 632.8677,-1990.0046 634.7429,-1928.053"/>
<polygon fill="#000000" stroke="#000000" points="638.2467,-1928.003 635.0951,-1917.8878 631.2509,-1927.7606 638.2467,-1928.003"/>
</g>
<!-- leaf_17 -->
<g id="node18" class="node">
<title>leaf_17</title>
<polygon fill="none" stroke="#c0c0c0" points="1040.5,-2259.8045 681.5,-2259.8045 681.5,-1539.6018 1040.5,-1539.6018 1040.5,-2259.8045"/>
<text text-anchor="middle" x="861" y="-2244.8037" font-family="Inconsolata" font-size="14.00" fill="#000000">local L = require &quot;lpeg&quot;</text>
<text text-anchor="middle" x="861" y="-2213.4037" font-family="Inconsolata" font-size="14.00" fill="#000000">local s = require &quot;singletons/status&quot; ()</text>
<text text-anchor="middle" x="861" y="-2198.0037" font-family="Inconsolata" font-size="14.00" fill="#000000">s.verbose = true</text>
<text text-anchor="middle" x="861" y="-2166.6037" font-family="Inconsolata" font-size="14.00" fill="#000000">local pl_mini = require &quot;util/plmini&quot;</text>
<text text-anchor="middle" x="861" y="-2151.2036" font-family="Inconsolata" font-size="14.00" fill="#000000">local getfiles = pl_mini.dir.getfiles</text>
<text text-anchor="middle" x="861" y="-2135.8036" font-family="Inconsolata" font-size="14.00" fill="#000000">local makepath = pl_mini.dir.makepath</text>
<text text-anchor="middle" x="861" y="-2120.4036" font-family="Inconsolata" font-size="14.00" fill="#000000">local getdirectories = pl_mini.dir.getdirectories</text>
<text text-anchor="middle" x="861" y="-2105.0035" font-family="Inconsolata" font-size="14.00" fill="#000000">local extension = pl_mini.path.extension</text>
<text text-anchor="middle" x="861" y="-2089.6035" font-family="Inconsolata" font-size="14.00" fill="#000000">local dirname = pl_mini.path.dirname</text>
<text text-anchor="middle" x="861" y="-2074.2035" font-family="Inconsolata" font-size="14.00" fill="#000000">local basename = pl_mini.path.basename</text>
<text text-anchor="middle" x="861" y="-2058.8034" font-family="Inconsolata" font-size="14.00" fill="#000000">local read = pl_mini.file.read</text>
<text text-anchor="middle" x="861" y="-2043.4034" font-family="Inconsolata" font-size="14.00" fill="#000000">local write = pl_mini.file.write</text>
<text text-anchor="middle" x="861" y="-2028.0034" font-family="Inconsolata" font-size="14.00" fill="#000000">local isdir = pl_mini.path.isdir</text>
<text text-anchor="middle" x="861" y="-1996.6033" font-family="Inconsolata" font-size="14.00" fill="#000000">local u = {}</text>
<text text-anchor="middle" x="861" y="-1981.2033" font-family="Inconsolata" font-size="14.00" fill="#000000">function u.inherit(meta)</text>
<text text-anchor="middle" x="861" y="-1965.8033" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local MT = meta or {}</text>
<text text-anchor="middle" x="861" y="-1950.4032" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local M = setmetatable({}, MT)</text>
<text text-anchor="middle" x="861" y="-1935.0032" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;M.__index = M</text>
<text text-anchor="middle" x="861" y="-1919.6032" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local m = setmetatable({}, M)</text>
<text text-anchor="middle" x="861" y="-1904.2032" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;m.__index = m</text>
<text text-anchor="middle" x="861" y="-1888.8031" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return M, m</text>
<text text-anchor="middle" x="861" y="-1873.4031" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="861" y="-1858.0031" font-family="Inconsolata" font-size="14.00" fill="#000000">function u.export(mod, constructor)</text>
<text text-anchor="middle" x="861" y="-1842.603" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;mod.__call = constructor</text>
<text text-anchor="middle" x="861" y="-1827.203" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return setmetatable({}, mod)</text>
<text text-anchor="middle" x="861" y="-1811.803" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="861" y="-1780.4029" font-family="Inconsolata" font-size="14.00" fill="#000000">local a = require &quot;singletons/anterm&quot;</text>
<text text-anchor="middle" x="861" y="-1749.0029" font-family="Inconsolata" font-size="14.00" fill="#000000">local m = require &quot;orb:Orbit/morphemes&quot;</text>
<text text-anchor="middle" x="861" y="-1733.6029" font-family="Inconsolata" font-size="14.00" fill="#000000">local walk = require &quot;orb:walk/walk&quot;</text>
<text text-anchor="middle" x="861" y="-1718.2028" font-family="Inconsolata" font-size="14.00" fill="#000000">local strHas = walk.strHas</text>
<text text-anchor="middle" x="861" y="-1702.8028" font-family="Inconsolata" font-size="14.00" fill="#000000">local endsWith = walk.endsWith</text>
<text text-anchor="middle" x="861" y="-1687.4028" font-family="Inconsolata" font-size="14.00" fill="#000000">local subLastFor = walk.subLastFor</text>
<text text-anchor="middle" x="861" y="-1672.0027" font-family="Inconsolata" font-size="14.00" fill="#000000">local writeOnChange = walk.writeOnChange</text>
<text text-anchor="middle" x="861" y="-1656.6027" font-family="Inconsolata" font-size="14.00" fill="#000000">local Path = require &quot;orb:walk/path&quot;</text>
<text text-anchor="middle" x="861" y="-1641.2027" font-family="Inconsolata" font-size="14.00" fill="#000000">local Dir = require &quot;orb:walk/directory&quot;</text>
<text text-anchor="middle" x="861" y="-1625.8027" font-family="Inconsolata" font-size="14.00" fill="#000000">local File = require &quot;orb:walk/file&quot;</text>
<text text-anchor="middle" x="861" y="-1610.4026" font-family="Inconsolata" font-size="14.00" fill="#000000">local epeg = require &quot;orb:util/epeg&quot;</text>
<text text-anchor="middle" x="861" y="-1579.0026" font-family="Inconsolata" font-size="14.00" fill="#000000">local Doc = require &quot;orb:Orbit/doc&quot;</text>
<text text-anchor="middle" x="861" y="-1547.6026" font-family="Inconsolata" font-size="14.00" fill="#000000">local W, w = u.inherit()</text>
</g>
<!-- codeblock_6&#45;&gt;leaf_17 -->
<g id="edge17" class="edge">
<title>codeblock_6&#45;&gt;leaf_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M835.1775,-2295.9354C835.6275,-2289.0309 836.1931,-2280.3515 836.851,-2270.2563"/>
<polygon fill="#000000" stroke="#000000" points="840.3515,-2270.3618 837.5093,-2260.1553 833.3663,-2269.9065 840.3515,-2270.3618"/>
</g>
<!-- leaf_18 -->
<g id="node19" class="node">
<title>leaf_18</title>
<polygon fill="none" stroke="#c0c0c0" points="1291.5,-1926.9036 1058.5,-1926.9036 1058.5,-1872.5027 1291.5,-1872.5027 1291.5,-1926.9036"/>
<text text-anchor="middle" x="1175" y="-1911.6032" font-family="Inconsolata" font-size="14.00" fill="#000000">function W.weaveMd(weaver, doc)</text>
<text text-anchor="middle" x="1175" y="-1896.2032" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return doc:toMarkdown()</text>
<text text-anchor="middle" x="1175" y="-1880.8031" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_7&#45;&gt;leaf_18 -->
<g id="edge18" class="edge">
<title>codeblock_7&#45;&gt;leaf_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1094.6634,-2295.9354C1107.423,-2233.0032 1150.0802,-2022.6115 1167.4969,-1936.7098"/>
<polygon fill="#000000" stroke="#000000" points="1170.9351,-1937.3655 1169.492,-1926.8694 1164.0746,-1935.9745 1170.9351,-1937.3655"/>
</g>
<!-- header_19 -->
<g id="node20" class="node">
<title>header_19</title>
<ellipse fill="none" stroke="#000000" cx="1375" cy="-1899.7031" rx="65.81" ry="18"/>
<text text-anchor="middle" x="1375" y="-1895.5031" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : .dot to .svg</text>
</g>
<!-- section_8&#45;&gt;header_19 -->
<g id="edge19" class="edge">
<title>section_8&#45;&gt;header_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1496.0601,-2298.3494C1479.6098,-2289.4131 1461.3046,-2276.6404 1450,-2260.0037 1378.0347,-2154.0949 1372.7811,-1993.2004 1373.8931,-1928.3144"/>
<polygon fill="#000000" stroke="#000000" points="1377.3985,-1928.1271 1374.1384,-1918.0464 1370.4005,-1927.9599 1377.3985,-1928.1271"/>
</g>
<!-- prose_20 -->
<g id="node21" class="node">
<title>prose_20</title>
<ellipse fill="none" stroke="#000000" cx="1491" cy="-1899.7031" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1491" y="-1895.5031" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_8&#45;&gt;prose_20 -->
<g id="edge20" class="edge">
<title>section_8&#45;&gt;prose_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1530.2119,-2295.9354C1523.7644,-2230.7838 1501.6766,-2007.5888 1493.81,-1928.098"/>
<polygon fill="#000000" stroke="#000000" points="1497.2654,-1927.4733 1492.7975,-1917.8666 1490.2994,-1928.1627 1497.2654,-1927.4733"/>
</g>
<!-- prose_21 -->
<g id="node22" class="node">
<title>prose_21</title>
<ellipse fill="none" stroke="#000000" cx="1573" cy="-1899.7031" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1573" y="-1895.5031" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_8&#45;&gt;prose_21 -->
<g id="edge21" class="edge">
<title>section_8&#45;&gt;prose_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1533.7881,-2295.9354C1540.2356,-2230.7838 1562.3234,-2007.5888 1570.19,-1928.098"/>
<polygon fill="#000000" stroke="#000000" points="1573.7006,-1928.1627 1571.2025,-1917.8666 1566.7346,-1927.4733 1573.7006,-1928.1627"/>
</g>
<!-- codeblock_22 -->
<g id="node23" class="node">
<title>codeblock_22</title>
<ellipse fill="none" stroke="#000000" cx="1770" cy="-1899.7031" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1770" y="-1895.5031" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 72&#45;84</text>
</g>
<!-- section_8&#45;&gt;codeblock_22 -->
<g id="edge22" class="edge">
<title>section_8&#45;&gt;codeblock_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1565.2942,-2297.9683C1581.6916,-2288.7261 1600.7361,-2275.7985 1614,-2260.0037 1702.2376,-2154.9299 1748.1628,-1992.3314 1763.7614,-1927.6365"/>
<polygon fill="#000000" stroke="#000000" points="1767.1997,-1928.305 1766.0866,-1917.7688 1760.3863,-1926.6995 1767.1997,-1928.305"/>
</g>
<!-- codeblock_23 -->
<g id="node24" class="node">
<title>codeblock_23</title>
<ellipse fill="none" stroke="#000000" cx="2193" cy="-1899.7031" rx="82.2579" ry="18"/>
<text text-anchor="middle" x="2193" y="-1895.5031" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 88&#45;151</text>
</g>
<!-- section_8&#45;&gt;codeblock_23 -->
<g id="edge23" class="edge">
<title>section_8&#45;&gt;codeblock_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1598.7327,-2307.9676C1680.2266,-2299.7259 1812.5856,-2283.2707 1856,-2260.0037 2011.0159,-2176.9265 2134.1729,-1995.3104 2176.8443,-1926.6859"/>
<polygon fill="#000000" stroke="#000000" points="2180.0676,-1928.1259 2182.3262,-1917.7746 2174.1054,-1924.4581 2180.0676,-1928.1259"/>
</g>
<!-- header_31 -->
<g id="node32" class="node">
<title>header_31</title>
<ellipse fill="none" stroke="#000000" cx="2840" cy="-1899.7031" rx="106.5613" ry="18"/>
<text text-anchor="middle" x="2840" y="-1895.5031" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : New Weave Interface</text>
</g>
<!-- section_9&#45;&gt;header_31 -->
<g id="edge31" class="edge">
<title>section_9&#45;&gt;header_31</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2914.5983,-2295.9354C2902.3323,-2230.7838 2860.3115,-2007.5888 2845.3459,-1928.098"/>
<polygon fill="#000000" stroke="#000000" points="2848.7095,-1927.0464 2843.4196,-1917.8666 2841.8303,-1928.3416 2848.7095,-1927.0464"/>
</g>
<!-- prose_32 -->
<g id="node33" class="node">
<title>prose_32</title>
<ellipse fill="none" stroke="#000000" cx="2997" cy="-1899.7031" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2997" y="-1895.5031" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_9&#45;&gt;prose_32 -->
<g id="edge32" class="edge">
<title>section_9&#45;&gt;prose_32</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2933.8618,-2296.3365C2941.8758,-2286.3757 2950.9492,-2273.291 2956,-2260.0037 3000.4207,-2143.1457 3000.5975,-1990.7872 2998.4418,-1928.3163"/>
<polygon fill="#000000" stroke="#000000" points="3001.9289,-1927.9173 2998.0373,-1918.0631 2994.9343,-1928.1933 3001.9289,-1927.9173"/>
</g>
<!-- section_33 -->
<g id="node34" class="node">
<title>section_33</title>
<ellipse fill="none" stroke="#000000" cx="3649" cy="-1899.7031" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="3649" y="-1895.5031" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 159&#45;215</text>
</g>
<!-- section_9&#45;&gt;section_33 -->
<g id="edge33" class="edge">
<title>section_9&#45;&gt;section_33</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2955.5312,-2298.3771C2979.4474,-2288.1111 3010.9172,-2274.0287 3038,-2260.0037 3263.1515,-2143.408 3521.3647,-1981.2997 3613.8181,-1922.3084"/>
<polygon fill="#000000" stroke="#000000" points="3615.9534,-1925.0975 3622.4954,-1916.7637 3612.1842,-1919.1989 3615.9534,-1925.0975"/>
</g>
<!-- leaf_12 -->
<g id="node13" class="node">
<title>leaf_12</title>
<polygon fill="none" stroke="#c0c0c0" points="450,-1056.1028 0,-1056.1028 0,-984.3005 450,-984.3005 450,-1056.1028"/>
<text text-anchor="middle" x="225" y="-992.7017" font-family="Inconsolata" font-size="14.00" fill="#000000">Our weaver is currently somewhat narrowly focused on markdown.</text>
</g>
<!-- raw_11&#45;&gt;leaf_12 -->
<g id="edge12" class="edge">
<title>raw_11&#45;&gt;leaf_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M492.1296,-1881.3461C492.0826,-1827.718 488.9056,-1667.0259 455,-1539.4025 406.0422,-1355.1213 299.7826,-1152.9434 250.7465,-1065.0918"/>
<polygon fill="#000000" stroke="#000000" points="253.7044,-1063.2106 245.7606,-1056.2002 247.5988,-1066.6343 253.7044,-1063.2106"/>
</g>
<!-- leaf_14 -->
<g id="node15" class="node">
<title>leaf_14</title>
<polygon fill="none" stroke="#c0c0c0" points="659.5,-1040.1037 468.5,-1040.1037 468.5,-1000.2996 659.5,-1000.2996 659.5,-1040.1037"/>
<text text-anchor="middle" x="564" y="-1008.7017" font-family="Inconsolata" font-size="14.00" fill="#000000">This will change in time.</text>
</g>
<!-- raw_13&#45;&gt;leaf_14 -->
<g id="edge14" class="edge">
<title>raw_13&#45;&gt;leaf_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M564,-1881.3335C564,-1770.373 564,-1189.7146 564,-1050.311"/>
<polygon fill="#000000" stroke="#000000" points="567.5001,-1049.9742 564,-1039.9743 560.5001,-1049.9743 567.5001,-1049.9742"/>
</g>
<!-- leaf_16 -->
<g id="node17" class="node">
<title>leaf_16</title>
<polygon fill="none" stroke="#c0c0c0" points="834,-1040.1037 678,-1040.1037 678,-1000.2996 834,-1000.2996 834,-1040.1037"/>
<text text-anchor="middle" x="756" y="-1008.7017" font-family="Inconsolata" font-size="14.00" fill="#000000">Now to activate dot!</text>
</g>
<!-- raw_15&#45;&gt;leaf_16 -->
<g id="edge16" class="edge">
<title>raw_15&#45;&gt;leaf_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M637.4118,-1881.6634C641.6254,-1828.8955 654.8876,-1670.3024 672,-1539.4025 696.4179,-1352.6198 736.0303,-1129.7101 750.4916,-1050.1938"/>
<polygon fill="#000000" stroke="#000000" points="754.0099,-1050.4098 752.3611,-1039.944 747.1235,-1049.1537 754.0099,-1050.4098"/>
</g>
<!-- leaf_24 -->
<g id="node25" class="node">
<title>leaf_24</title>
<polygon fill="none" stroke="#c0c0c0" points="1404,-1038.2017 1276,-1038.2017 1276,-1002.2017 1404,-1002.2017 1404,-1038.2017"/>
<text text-anchor="middle" x="1340" y="-1016.7017" font-family="Inconsolata" font-size="14.00" fill="#000000">*** .dot to .svg</text>
</g>
<!-- header_19&#45;&gt;leaf_24 -->
<g id="edge24" class="edge">
<title>header_19&#45;&gt;leaf_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1374.269,-1881.3335C1369.8342,-1769.8927 1346.5454,-1184.6784 1341.1272,-1048.5255"/>
<polygon fill="#000000" stroke="#000000" points="1344.622,-1048.3231 1340.727,-1038.4702 1337.6275,-1048.6015 1344.622,-1048.3231"/>
</g>
<!-- raw_25 -->
<g id="node26" class="node">
<title>raw_25</title>
<ellipse fill="none" stroke="#000000" cx="1449" cy="-1020.2017" rx="27" ry="18"/>
<text text-anchor="middle" x="1449" y="-1016.0017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_20&#45;&gt;raw_25 -->
<g id="edge25" class="edge">
<title>prose_20&#45;&gt;raw_25</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1490.1228,-1881.3335C1484.801,-1769.8927 1456.8545,-1184.6784 1450.3526,-1048.5255"/>
<polygon fill="#000000" stroke="#000000" points="1453.8455,-1048.2919 1449.8724,-1038.4702 1446.8535,-1048.6258 1453.8455,-1048.2919"/>
</g>
<!-- raw_27 -->
<g id="node28" class="node">
<title>raw_27</title>
<ellipse fill="none" stroke="#000000" cx="1521" cy="-1020.2017" rx="27" ry="18"/>
<text text-anchor="middle" x="1521" y="-1016.0017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_21&#45;&gt;raw_27 -->
<g id="edge27" class="edge">
<title>prose_21&#45;&gt;raw_27</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1571.9139,-1881.3335C1565.325,-1769.8927 1530.7246,-1184.6784 1522.6746,-1048.5255"/>
<polygon fill="#000000" stroke="#000000" points="1526.1643,-1048.2462 1522.0801,-1038.4702 1519.1765,-1048.6594 1526.1643,-1048.2462"/>
</g>
<!-- leaf_29 -->
<g id="node30" class="node">
<title>leaf_29</title>
<polygon fill="none" stroke="#c0c0c0" points="2044,-1109.1025 1566,-1109.1025 1566,-931.3009 2044,-931.3009 2044,-1109.1025"/>
<text text-anchor="middle" x="1805" y="-1093.7018" font-family="Inconsolata" font-size="14.00" fill="#000000">local popen = io.popen</text>
<text text-anchor="middle" x="1805" y="-1078.3018" font-family="Inconsolata" font-size="14.00" fill="#000000">local function dotToSvg(dotted, out_file)</text>
<text text-anchor="middle" x="1805" y="-1062.9018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local success, svg_file = pcall (popen,</text>
<text text-anchor="middle" x="1805" y="-1047.5017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&quot;dot &#45;Tsvg &quot; .. tostring(out_file), &quot;r&quot;)</text>
<text text-anchor="middle" x="1805" y="-1032.1017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if success then</text>
<text text-anchor="middle" x="1805" y="-1016.7017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return svg_file:read(&quot;*a&quot;)</text>
<text text-anchor="middle" x="1805" y="-1001.3016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else</text>
<text text-anchor="middle" x="1805" y="-985.9016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; #todo start using %d and format!</text>
<text text-anchor="middle" x="1805" y="-970.5016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;s:complain(&quot;dotError&quot;, &quot;dot failed with &quot; .. success)</text>
<text text-anchor="middle" x="1805" y="-955.1015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1805" y="-939.7015" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_22&#45;&gt;leaf_29 -->
<g id="edge29" class="edge">
<title>codeblock_22&#45;&gt;leaf_29</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1770.731,-1881.3335C1774.6094,-1783.8757 1792.9071,-1324.0789 1801.0618,-1119.1638"/>
<polygon fill="#000000" stroke="#000000" points="1804.5655,-1119.138 1801.466,-1109.0067 1797.571,-1118.8596 1804.5655,-1119.138"/>
</g>
<!-- leaf_30 -->
<g id="node31" class="node">
<title>leaf_30</title>
<polygon fill="none" stroke="#c0c0c0" points="2743.5,-1503.6035 2062.5,-1503.6035 2062.5,-536.7998 2743.5,-536.7998 2743.5,-1503.6035"/>
<text text-anchor="middle" x="2403" y="-1488.2025" font-family="Inconsolata" font-size="14.00" fill="#000000">local function weave_dir(weaver, pwd, depth)</text>
<text text-anchor="middle" x="2403" y="-1472.8025" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local depth = depth + 1</text>
<text text-anchor="middle" x="2403" y="-1457.4025" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for dir_str in pl_mini.dir.walk(pwd, false, false) do</text>
<text text-anchor="middle" x="2403" y="-1442.0024" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local dir = Dir(dir_str)</text>
<text text-anchor="middle" x="2403" y="-1426.6024" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if not strHas(&quot;.git&quot;, dir.path.str)</text>
<text text-anchor="middle" x="2403" y="-1411.2024" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;and not strHas(&quot;src/lib&quot;, dir.path.str) then</text>
<text text-anchor="middle" x="2403" y="-1395.8023" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;dir = dir.path.str &#45;&#45; migrate this down</text>
<text text-anchor="middle" x="2403" y="-1380.4023" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local files = getfiles(dir)</text>
<text text-anchor="middle" x="2403" y="-1365.0023" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;s:verb((&quot; &#160;&quot;):rep(depth) .. &quot;* &quot; .. dir)</text>
<text text-anchor="middle" x="2403" y="-1349.6022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local subdirs = getdirectories(dir)</text>
<text text-anchor="middle" x="2403" y="-1334.2022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;for _, f in ipairs(files) do</text>
<text text-anchor="middle" x="2403" y="-1318.8022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if extension(f) == &quot;.orb&quot; then</text>
<text text-anchor="middle" x="2403" y="-1303.4022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; Weave and prepare out directory</text>
<text text-anchor="middle" x="2403" y="-1288.0021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;s:verb((&quot; &#160;&quot;):rep(depth) .. &quot; &#160;&#45; &quot; .. f)</text>
<text text-anchor="middle" x="2403" y="-1272.6021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local orb_f = read(f)</text>
<text text-anchor="middle" x="2403" y="-1257.2021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local doc = Doc(orb_f)</text>
<text text-anchor="middle" x="2403" y="-1241.802" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local doc_md_dir = subLastFor(&quot;/orb&quot;, &quot;/doc/md&quot;, dirname(f))</text>
<text text-anchor="middle" x="2403" y="-1226.402" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local doc_dot_dir = subLastFor(&quot;/orb&quot;, &quot;/doc/dot&quot;, dirname(f))</text>
<text text-anchor="middle" x="2403" y="-1211.002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local doc_svg_dir = subLastFor(&quot;/orb&quot;, &quot;/doc/svg&quot;, dirname(f))</text>
<text text-anchor="middle" x="2403" y="-1195.6019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;makepath(doc_md_dir)</text>
<text text-anchor="middle" x="2403" y="-1180.2019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;makepath(doc_dot_dir)</text>
<text text-anchor="middle" x="2403" y="-1164.8019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;makepath(doc_svg_dir)</text>
<text text-anchor="middle" x="2403" y="-1149.4018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local bare_name = basename(f):sub(1, &#45;5) &#45;&#45; &#160;== #&quot;.orb&quot;</text>
<text text-anchor="middle" x="2403" y="-1134.0018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local out_md_name = doc_md_dir .. &quot;/&quot; .. bare_name .. &quot;.md&quot;</text>
<text text-anchor="middle" x="2403" y="-1118.6018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local out_dot_name = doc_dot_dir .. &quot;/&quot; .. bare_name .. &quot;.dot&quot;</text>
<text text-anchor="middle" x="2403" y="-1103.2017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local out_svg_name = doc_svg_dir .. &quot;/&quot; .. bare_name .. &quot;.svg&quot;</text>
<text text-anchor="middle" x="2403" y="-1087.8017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local woven_md = weaver:weaveMd(doc) or &quot;&quot;</text>
<text text-anchor="middle" x="2403" y="-1056.4017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; Compare, report, and write out if necessary</text>
<text text-anchor="middle" x="2403" y="-1041.0017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local last_md = read(out_md_name) or &quot;&quot;</text>
<text text-anchor="middle" x="2403" y="-1025.6016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local changed_md = writeOnChange(woven_md, last_md, out_md_name, depth)</text>
<text text-anchor="middle" x="2403" y="-1010.2016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local woven_dot = doc:dot() or &quot;&quot;</text>
<text text-anchor="middle" x="2403" y="-994.8016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local last_dot = read(out_dot_name) or &quot;&quot;</text>
<text text-anchor="middle" x="2403" y="-979.4015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local changed_dot = writeOnChange(woven_dot, last_dot, out_dot_name, depth)</text>
<text text-anchor="middle" x="2403" y="-948.0015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; SVG call is fairly slow and only useful of the dot has changed</text>
<text text-anchor="middle" x="2403" y="-932.6015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if changed_dot then</text>
<text text-anchor="middle" x="2403" y="-917.2014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local woven_svg = dotToSvg(woven_dot, out_dot_name)</text>
<text text-anchor="middle" x="2403" y="-901.8014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local last_svg = read(out_svg_name) or &quot;&quot;</text>
<text text-anchor="middle" x="2403" y="-886.4014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;writeOnChange(woven_svg, last_svg, out_svg_name, depth)</text>
<text text-anchor="middle" x="2403" y="-871.0013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2403" y="-855.6013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2403" y="-840.2013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2403" y="-824.8012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2403" y="-809.4012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2403" y="-778.0012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return true</text>
<text text-anchor="middle" x="2403" y="-762.6012" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="2403" y="-731.2011" font-family="Inconsolata" font-size="14.00" fill="#000000">local function weave_all(weaver, pwd)</text>
<text text-anchor="middle" x="2403" y="-715.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for dir in pl_mini.dir.walk(pwd, false, false) do</text>
<text text-anchor="middle" x="2403" y="-700.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if not strHas(&quot;.git&quot;, dir) and isdir(dir)</text>
<text text-anchor="middle" x="2403" y="-685.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;and endsWith(&quot;orb&quot;, dir) then</text>
<text text-anchor="middle" x="2403" y="-669.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;s:chat(a.cyan(&quot;Weave: &quot; .. dir))</text>
<text text-anchor="middle" x="2403" y="-654.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return weave_dir(weaver, dir, 0)</text>
<text text-anchor="middle" x="2403" y="-638.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2403" y="-623.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2403" y="-592.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return false</text>
<text text-anchor="middle" x="2403" y="-576.6008" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="2403" y="-545.2008" font-family="Inconsolata" font-size="14.00" fill="#000000">W.weave_all = weave_all</text>
</g>
<!-- codeblock_23&#45;&gt;leaf_30 -->
<g id="edge30" class="edge">
<title>codeblock_23&#45;&gt;leaf_30</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2197.3861,-1881.3335C2209.7084,-1829.7265 2246.2902,-1676.5183 2285.2489,-1513.3555"/>
<polygon fill="#000000" stroke="#000000" points="2288.6615,-1514.1331 2287.5797,-1503.5936 2281.8529,-1512.5073 2288.6615,-1514.1331"/>
</g>
<!-- leaf_26 -->
<g id="node27" class="node">
<title>leaf_26</title>
<polygon fill="none" stroke="#c0c0c0" points="1438,-324.1019 1310,-324.1019 1310,-268.2989 1438,-268.2989 1438,-324.1019"/>
<text text-anchor="middle" x="1374" y="-276.7004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;Stripped down:</text>
</g>
<!-- raw_25&#45;&gt;leaf_26 -->
<g id="edge26" class="edge">
<title>raw_25&#45;&gt;leaf_26</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1448.2177,-1002.1583C1445.3343,-938.4075 1434.3441,-717.8689 1413,-537.0008 1404.5097,-465.0544 1389.9522,-381.7396 1381.2269,-334.3741"/>
<polygon fill="#000000" stroke="#000000" points="1384.6169,-333.459 1379.3524,-324.2647 1377.7343,-334.7352 1384.6169,-333.459"/>
</g>
<!-- leaf_28 -->
<g id="node29" class="node">
<title>leaf_28</title>
<polygon fill="none" stroke="#c0c0c0" points="1738,-316.1025 1456,-316.1025 1456,-276.2983 1738,-276.2983 1738,-316.1025"/>
<text text-anchor="middle" x="1597" y="-284.7004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#45; [ ] #todo add error checking here.</text>
</g>
<!-- raw_27&#45;&gt;leaf_28 -->
<g id="edge28" class="edge">
<title>raw_27&#45;&gt;leaf_28</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1521.7562,-1002.1552C1524.5528,-938.394 1535.2903,-717.8253 1557,-537.0008 1566.1664,-460.652 1582.4345,-371.5575 1591.1317,-326.1432"/>
<polygon fill="#000000" stroke="#000000" points="1594.613,-326.5739 1593.0698,-316.0921 1587.7396,-325.2485 1594.613,-326.5739"/>
</g>
<!-- leaf_34 -->
<g id="node35" class="node">
<title>leaf_34</title>
<polygon fill="none" stroke="#c0c0c0" points="2932,-1038.2017 2762,-1038.2017 2762,-1002.2017 2932,-1002.2017 2932,-1038.2017"/>
<text text-anchor="middle" x="2847" y="-1016.7017" font-family="Inconsolata" font-size="14.00" fill="#000000">** New Weave Interface</text>
</g>
<!-- header_31&#45;&gt;leaf_34 -->
<g id="edge34" class="edge">
<title>header_31&#45;&gt;leaf_34</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2840.1462,-1881.3335C2841.0332,-1769.8927 2845.6909,-1184.6784 2846.7746,-1048.5255"/>
<polygon fill="#000000" stroke="#000000" points="2850.2748,-1048.4978 2846.8546,-1038.4702 2843.275,-1048.442 2850.2748,-1048.4978"/>
</g>
<!-- raw_35 -->
<g id="node36" class="node">
<title>raw_35</title>
<ellipse fill="none" stroke="#000000" cx="2990" cy="-1020.2017" rx="27" ry="18"/>
<text text-anchor="middle" x="2990" y="-1016.0017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_32&#45;&gt;raw_35 -->
<g id="edge35" class="edge">
<title>prose_32&#45;&gt;raw_35</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2996.8538,-1881.3335C2995.9668,-1769.8927 2991.3091,-1184.6784 2990.2254,-1048.5255"/>
<polygon fill="#000000" stroke="#000000" points="2993.725,-1048.442 2990.1454,-1038.4702 2986.7252,-1048.4978 2993.725,-1048.442"/>
</g>
<!-- header_37 -->
<g id="node38" class="node">
<title>header_37</title>
<ellipse fill="none" stroke="#000000" cx="3265" cy="-1020.2017" rx="92.8553" ry="18"/>
<text text-anchor="middle" x="3265" y="-1016.0017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : weaveDeck(deck)</text>
</g>
<!-- section_33&#45;&gt;header_37 -->
<g id="edge37" class="edge">
<title>section_33&#45;&gt;header_37</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3637.99,-1881.6364C3604.629,-1826.4217 3502.8582,-1654.4721 3436,-1503.4025 3361.5335,-1335.1416 3295.8017,-1123.4536 3273.2763,-1048.265"/>
<polygon fill="#000000" stroke="#000000" points="3276.6,-1047.163 3270.3882,-1038.5802 3269.892,-1049.1634 3276.6,-1047.163"/>
</g>
<!-- prose_38 -->
<g id="node39" class="node">
<title>prose_38</title>
<ellipse fill="none" stroke="#000000" cx="3477" cy="-1020.2017" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="3477" y="-1016.0017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_33&#45;&gt;prose_38 -->
<g id="edge38" class="edge">
<title>section_33&#45;&gt;prose_38</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3644.0682,-1881.6497C3628.9251,-1825.7755 3582.3504,-1650.5838 3553,-1503.4025 3518.7301,-1331.5517 3490.3277,-1122.7933 3480.5999,-1048.2841"/>
<polygon fill="#000000" stroke="#000000" points="3484.0603,-1047.7515 3479.3017,-1038.2854 3477.1185,-1048.6529 3484.0603,-1047.7515"/>
</g>
<!-- codeblock_39 -->
<g id="node40" class="node">
<title>codeblock_39</title>
<ellipse fill="none" stroke="#000000" cx="3649" cy="-1020.2017" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="3649" y="-1016.0017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 163&#45;190</text>
</g>
<!-- section_33&#45;&gt;codeblock_39 -->
<g id="edge39" class="edge">
<title>section_33&#45;&gt;codeblock_39</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3649,-1881.3335C3649,-1769.8927 3649,-1184.6784 3649,-1048.5255"/>
<polygon fill="#000000" stroke="#000000" points="3652.5001,-1048.4702 3649,-1038.4702 3645.5001,-1048.4703 3652.5001,-1048.4702"/>
</g>
<!-- codeblock_40 -->
<g id="node41" class="node">
<title>codeblock_40</title>
<ellipse fill="none" stroke="#000000" cx="3966" cy="-1020.2017" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="3966" y="-1016.0017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 192&#45;201</text>
</g>
<!-- section_33&#45;&gt;codeblock_40 -->
<g id="edge40" class="edge">
<title>section_33&#45;&gt;codeblock_40</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3655.4758,-1881.7362C3695.311,-1771.2155 3907.0219,-1183.8335 3955.9177,-1048.1745"/>
<polygon fill="#000000" stroke="#000000" points="3959.3036,-1049.1025 3959.4018,-1038.5081 3952.7183,-1046.7289 3959.3036,-1049.1025"/>
</g>
<!-- codeblock_41 -->
<g id="node42" class="node">
<title>codeblock_41</title>
<ellipse fill="none" stroke="#000000" cx="4285" cy="-1020.2017" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="4285" y="-1016.0017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 203&#45;210</text>
</g>
<!-- section_33&#45;&gt;codeblock_41 -->
<g id="edge41" class="edge">
<title>section_33&#45;&gt;codeblock_41</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3672.4805,-1882.3754C3740.5609,-1831.1496 3940.8837,-1673.3403 4062,-1503.4025 4173.391,-1347.1103 4250.8392,-1126.3037 4276.0856,-1048.5914"/>
<polygon fill="#000000" stroke="#000000" points="4279.5701,-1049.1885 4279.2996,-1038.5971 4272.9062,-1047.0454 4279.5701,-1049.1885"/>
</g>
<!-- codeblock_42 -->
<g id="node43" class="node">
<title>codeblock_42</title>
<ellipse fill="none" stroke="#000000" cx="4604" cy="-1020.2017" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="4604" y="-1016.0017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 212&#45;214</text>
</g>
<!-- section_33&#45;&gt;codeblock_42 -->
<g id="edge42" class="edge">
<title>section_33&#45;&gt;codeblock_42</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3696.6924,-1885.6827C3824.0517,-1846.0303 4176.3327,-1721.5694 4381,-1503.4025 4513.4878,-1362.176 4578.5112,-1128.3136 4597.7331,-1048.1615"/>
<polygon fill="#000000" stroke="#000000" points="4601.1659,-1048.853 4600.0471,-1038.3174 4594.3516,-1047.2511 4601.1659,-1048.853"/>
</g>
<!-- leaf_36 -->
<g id="node37" class="node">
<title>leaf_36</title>
<polygon fill="none" stroke="#c0c0c0" points="3131,-332.1016 2779,-332.1016 2779,-260.2992 3131,-260.2992 3131,-332.1016"/>
<text text-anchor="middle" x="2955" y="-284.7004" font-family="Inconsolata" font-size="14.00" fill="#000000">Time to bring the weaver up to modern standards.</text>
</g>
<!-- raw_35&#45;&gt;leaf_36 -->
<g id="edge36" class="edge">
<title>raw_35&#45;&gt;leaf_36</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2989.1173,-1001.9428C2984.6028,-908.5566 2964.0422,-483.2445 2957.2126,-341.9698"/>
<polygon fill="#000000" stroke="#000000" points="2960.705,-341.7262 2956.7261,-331.9069 2953.7132,-342.0643 2960.705,-341.7262"/>
</g>
<!-- leaf_43 -->
<g id="node44" class="node">
<title>leaf_43</title>
<polygon fill="none" stroke="#c0c0c0" points="3298.5,-314.2004 3149.5,-314.2004 3149.5,-278.2004 3298.5,-278.2004 3298.5,-314.2004"/>
<text text-anchor="middle" x="3224" y="-292.7004" font-family="Inconsolata" font-size="14.00" fill="#000000">*** weaveDeck(deck)</text>
</g>
<!-- header_37&#45;&gt;leaf_43 -->
<g id="edge43" class="edge">
<title>header_37&#45;&gt;leaf_43</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3263.966,-1001.9428C3258.4381,-904.3272 3232.3721,-444.0393 3225.6071,-324.58"/>
<polygon fill="#000000" stroke="#000000" points="3229.0911,-324.196 3225.0312,-314.4099 3222.1023,-324.5918 3229.0911,-324.196"/>
</g>
<!-- raw_44 -->
<g id="node45" class="node">
<title>raw_44</title>
<ellipse fill="none" stroke="#000000" cx="3344" cy="-296.2004" rx="27" ry="18"/>
<text text-anchor="middle" x="3344" y="-292.0004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_38&#45;&gt;raw_44 -->
<g id="edge44" class="edge">
<title>prose_38&#45;&gt;raw_44</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3473.5799,-1002.28C3460.9272,-935.8981 3415.6607,-697.6974 3380,-501.0008 3368.5557,-437.8762 3355.6526,-363.7028 3348.8307,-324.2378"/>
<polygon fill="#000000" stroke="#000000" points="3352.2642,-323.5519 3347.1135,-314.2933 3345.3663,-324.7431 3352.2642,-323.5519"/>
</g>
<!-- leaf_46 -->
<g id="node47" class="node">
<title>leaf_46</title>
<polygon fill="none" stroke="#c0c0c0" points="3909,-500.8013 3389,-500.8013 3389,-91.5995 3909,-91.5995 3909,-500.8013"/>
<text text-anchor="middle" x="3649" y="-485.8008" font-family="Inconsolata" font-size="14.00" fill="#000000">local function weaveDeck(weaver, deck)</text>
<text text-anchor="middle" x="3649" y="-470.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local dir = deck.dir</text>
<text text-anchor="middle" x="3649" y="-455.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local codex = deck.codex</text>
<text text-anchor="middle" x="3649" y="-439.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local orbDir = codex.orb</text>
<text text-anchor="middle" x="3649" y="-424.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local docMdDir = codex.docMd</text>
<text text-anchor="middle" x="3649" y="-408.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;s:verb (&quot;weaving &quot; .. tostring(deck.dir))</text>
<text text-anchor="middle" x="3649" y="-393.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;s:verb (&quot;into &quot; .. tostring(docMdDir))</text>
<text text-anchor="middle" x="3649" y="-378.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for i, sub in ipairs(deck) do</text>
<text text-anchor="middle" x="3649" y="-362.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;weaveDeck(weaver, sub)</text>
<text text-anchor="middle" x="3649" y="-347.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3649" y="-331.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for name, doc in pairs(deck.docs) do</text>
<text text-anchor="middle" x="3649" y="-316.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local woven = weaver:weaveMd(doc)</text>
<text text-anchor="middle" x="3649" y="-301.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if woven then</text>
<text text-anchor="middle" x="3649" y="-285.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; add to docMds</text>
<text text-anchor="middle" x="3649" y="-270.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local docMdPath = Path(name):subFor(orbDir, docMdDir, &quot;.md&quot;)</text>
<text text-anchor="middle" x="3649" y="-254.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;s:verb(&quot;wove: &quot; .. name)</text>
<text text-anchor="middle" x="3649" y="-239.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;s:verb(&quot;into: &#160;&#160;&#160;&quot; .. tostring(docMdPath))</text>
<text text-anchor="middle" x="3649" y="-224.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;deck.docMds[docMdPath] = woven</text>
<text text-anchor="middle" x="3649" y="-208.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;codex.docMds[docMdPath] = woven</text>
<text text-anchor="middle" x="3649" y="-193.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3649" y="-161.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3649" y="-146.4001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return deck.docMds</text>
<text text-anchor="middle" x="3649" y="-131.0001" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="3649" y="-99.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">W.weaveDeck = weaveDeck</text>
</g>
<!-- codeblock_39&#45;&gt;leaf_46 -->
<g id="edge46" class="edge">
<title>codeblock_39&#45;&gt;leaf_46</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3649,-1001.9428C3649,-934.3914 3649,-693.1622 3649,-511.3913"/>
<polygon fill="#000000" stroke="#000000" points="3652.5001,-511.1472 3649,-501.1472 3645.5001,-511.1473 3652.5001,-511.1472"/>
</g>
<!-- leaf_47 -->
<g id="node48" class="node">
<title>leaf_47</title>
<polygon fill="none" stroke="#c0c0c0" points="4251,-361.9008 3927,-361.9008 3927,-230.5 4251,-230.5 4251,-361.9008"/>
<text text-anchor="middle" x="4089" y="-346.6005" font-family="Inconsolata" font-size="14.00" fill="#000000">function W.weaveCodex(weaver, codex)</text>
<text text-anchor="middle" x="4089" y="-331.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;print &quot;weaving CODEX&quot;</text>
<text text-anchor="middle" x="4089" y="-315.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local orb = codex.orb</text>
<text text-anchor="middle" x="4089" y="-300.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;weaveDeck(weaver, orb)</text>
<text text-anchor="middle" x="4089" y="-285.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;for name, docMd in pairs(codex.docMds) do</text>
<text text-anchor="middle" x="4089" y="-269.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;walk.writeOnChange(name, docMd)</text>
<text text-anchor="middle" x="4089" y="-254.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="4089" y="-238.8003" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_40&#45;&gt;leaf_47 -->
<g id="edge47" class="edge">
<title>codeblock_40&#45;&gt;leaf_47</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3969.102,-1001.9428C3983.9622,-914.4728 4048.2945,-535.8009 4076.1083,-372.0831"/>
<polygon fill="#000000" stroke="#000000" points="4079.5822,-372.5321 4077.8066,-362.0871 4072.681,-371.3596 4079.5822,-372.5321"/>
</g>
<!-- leaf_48 -->
<g id="node49" class="node">
<title>leaf_48</title>
<polygon fill="none" stroke="#c0c0c0" points="4551,-346.8013 4269,-346.8013 4269,-245.5995 4551,-245.5995 4551,-346.8013"/>
<text text-anchor="middle" x="4410" y="-331.8005" font-family="Inconsolata" font-size="14.00" fill="#000000">local function new(Weaver, doc)</text>
<text text-anchor="middle" x="4410" y="-316.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local weaver = setmetatable({}, W)</text>
<text text-anchor="middle" x="4410" y="-269.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return weaver</text>
<text text-anchor="middle" x="4410" y="-253.6004" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_41&#45;&gt;leaf_48 -->
<g id="edge48" class="edge">
<title>codeblock_41&#45;&gt;leaf_48</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4288.1524,-1001.9428C4303.7336,-911.6962 4372.8339,-511.467 4399.4755,-357.1583"/>
<polygon fill="#000000" stroke="#000000" points="4402.9911,-357.3676 4401.2435,-346.9179 4396.0931,-356.1766 4402.9911,-357.3676"/>
</g>
<!-- leaf_49 -->
<g id="node50" class="node">
<title>leaf_49</title>
<polygon fill="none" stroke="#c0c0c0" points="4641,-314.2004 4569,-314.2004 4569,-278.2004 4641,-278.2004 4641,-314.2004"/>
<text text-anchor="middle" x="4605" y="-292.7004" font-family="Inconsolata" font-size="14.00" fill="#000000">return W</text>
</g>
<!-- codeblock_42&#45;&gt;leaf_49 -->
<g id="edge49" class="edge">
<title>codeblock_42&#45;&gt;leaf_49</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4604.0252,-1001.9428C4604.16,-904.3272 4604.7958,-444.0393 4604.9608,-324.58"/>
<polygon fill="#000000" stroke="#000000" points="4608.4609,-324.4148 4604.9748,-314.4099 4601.4609,-324.405 4608.4609,-324.4148"/>
</g>
<!-- leaf_45 -->
<g id="node46" class="node">
<title>leaf_45</title>
<polygon fill="none" stroke="#c0c0c0" points="3516.5,-55.6015 3171.5,-55.6015 3171.5,.2015 3516.5,.2015 3516.5,-55.6015"/>
<text text-anchor="middle" x="3344" y="-8.2" font-family="Inconsolata" font-size="14.00" fill="#000000">This takes a properly cased deck and weaves it.</text>
</g>
<!-- raw_44&#45;&gt;leaf_45 -->
<g id="edge45" class="edge">
<title>raw_44&#45;&gt;leaf_45</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3344,-278.1664C3344,-234.997 3344,-124.9468 3344,-66.1328"/>
<polygon fill="#000000" stroke="#000000" points="3347.5001,-65.7748 3344,-55.7749 3340.5001,-65.7749 3347.5001,-65.7748"/>
</g>
</g>
</svg>
