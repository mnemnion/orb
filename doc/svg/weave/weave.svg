<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: lpegNode Pages: 1 -->
<svg width="4346pt" height="2453pt"
 viewBox="0.00 0.00 4346.30 2453.20" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 2449.2037)">
<title>lpegNode</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-2449.2037 4342.2972,-2449.2037 4342.2972,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="768" cy="-2427.2037" rx="46.9581" ry="18"/>
<text text-anchor="middle" x="768" y="-2423.0037" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 202</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="768" cy="-2355.2037" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="768" y="-2351.0037" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;154</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M768,-2409.035C768,-2401.3346 768,-2392.178 768,-2383.6203"/>
<polygon fill="#000000" stroke="#000000" points="771.5001,-2383.6169 768,-2373.6169 764.5001,-2383.617 771.5001,-2383.6169"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="416" cy="-2283.2037" rx="49.5296" ry="18"/>
<text text-anchor="middle" x="416" y="-2279.0037" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">1 : Weave</text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M712.7757,-2345.3664C656.3672,-2335.1187 566.3369,-2318.2112 489,-2301.2037 481.7313,-2299.6052 474.0794,-2297.8259 466.5754,-2296.0256"/>
<polygon fill="#000000" stroke="#000000" points="467.3842,-2292.6203 456.8405,-2293.6602 465.7314,-2299.4224 467.3842,-2292.6203"/>
</g>
<!-- prose_3 -->
<g id="node4" class="node">
<title>prose_3</title>
<ellipse fill="none" stroke="#000000" cx="530" cy="-2283.2037" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="530" y="-2279.0037" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;prose_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M720.0402,-2342.7393C681.4253,-2332.4244 625.885,-2316.9576 578,-2301.2037 574.1626,-2299.9412 570.1769,-2298.5605 566.2163,-2297.1433"/>
<polygon fill="#000000" stroke="#000000" points="567.115,-2293.7451 556.5212,-2293.5914 564.7069,-2300.3179 567.115,-2293.7451"/>
</g>
<!-- prose_4 -->
<g id="node5" class="node">
<title>prose_4</title>
<ellipse fill="none" stroke="#000000" cx="619" cy="-2283.2037" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="619" y="-2279.0037" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;prose_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M735.3013,-2339.403C710.8419,-2327.5837 677.4944,-2311.4694 652.7785,-2299.5262"/>
<polygon fill="#000000" stroke="#000000" points="654.2918,-2296.3702 643.765,-2295.1707 651.2461,-2302.673 654.2918,-2296.3702"/>
</g>
<!-- prose_5 -->
<g id="node6" class="node">
<title>prose_5</title>
<ellipse fill="none" stroke="#000000" cx="704" cy="-2283.2037" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="704" y="-2279.0037" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;prose_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M752.1798,-2337.4059C744.1184,-2328.3368 734.1979,-2317.1763 725.4584,-2307.3444"/>
<polygon fill="#000000" stroke="#000000" points="728.0204,-2304.9583 718.7607,-2299.8095 722.7885,-2309.6089 728.0204,-2304.9583"/>
</g>
<!-- codeblock_6 -->
<g id="node7" class="node">
<title>codeblock_6</title>
<ellipse fill="none" stroke="#000000" cx="834" cy="-2283.2037" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="834" y="-2279.0037" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 10&#45;58</text>
</g>
<!-- section_1&#45;&gt;codeblock_6 -->
<g id="edge6" class="edge">
<title>section_1&#45;&gt;codeblock_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M784.3146,-2337.4059C792.3267,-2328.6654 802.1196,-2317.9823 810.8868,-2308.4181"/>
<polygon fill="#000000" stroke="#000000" points="813.4671,-2310.7828 817.6443,-2301.0462 808.307,-2306.0527 813.4671,-2310.7828"/>
</g>
<!-- codeblock_7 -->
<g id="node8" class="node">
<title>codeblock_7</title>
<ellipse fill="none" stroke="#000000" cx="1091" cy="-2283.2037" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1091" y="-2279.0037" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 60&#45;64</text>
</g>
<!-- section_1&#45;&gt;codeblock_7 -->
<g id="edge7" class="edge">
<title>section_1&#45;&gt;codeblock_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M819.1803,-2343.7951C874.8711,-2331.381 964.087,-2311.4939 1025.0066,-2297.9143"/>
<polygon fill="#000000" stroke="#000000" points="1025.9081,-2301.2993 1034.9071,-2295.7074 1024.3851,-2294.467 1025.9081,-2301.2993"/>
</g>
<!-- section_8 -->
<g id="node9" class="node">
<title>section_8</title>
<ellipse fill="none" stroke="#000000" cx="1532" cy="-2283.2037" rx="70.655" ry="18"/>
<text text-anchor="middle" x="1532" y="-2279.0037" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 67&#45;154</text>
</g>
<!-- section_1&#45;&gt;section_8 -->
<g id="edge8" class="edge">
<title>section_1&#45;&gt;section_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M830.1974,-2349.3421C969.0635,-2336.2553 1304.0093,-2304.6897 1455.4143,-2290.4212"/>
<polygon fill="#000000" stroke="#000000" points="1455.928,-2293.8884 1465.5555,-2289.4655 1455.2712,-2286.9192 1455.928,-2293.8884"/>
</g>
<!-- section_9 -->
<g id="node10" class="node">
<title>section_9</title>
<ellipse fill="none" stroke="#000000" cx="2918" cy="-2283.2037" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="2918" y="-2279.0037" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 155&#45;159</text>
</g>
<!-- section_1&#45;&gt;section_9 -->
<g id="edge9" class="edge">
<title>section_1&#45;&gt;section_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M833.2248,-2353.0194C1144.8682,-2342.583 2481.5949,-2297.8182 2833.0631,-2286.0481"/>
<polygon fill="#000000" stroke="#000000" points="2833.2949,-2289.5424 2843.1722,-2285.7095 2833.0606,-2282.5463 2833.2949,-2289.5424"/>
</g>
<!-- leaf_10 -->
<g id="node11" class="node">
<title>leaf_10</title>
<polygon fill="none" stroke="#c0c0c0" points="446.5,-1878.9031 381.5,-1878.9031 381.5,-1842.9031 446.5,-1842.9031 446.5,-1878.9031"/>
<text text-anchor="middle" x="414" y="-1857.4031" font-family="Inconsolata" font-size="14.00" fill="#000000">* Weave</text>
</g>
<!-- header_2&#45;&gt;leaf_10 -->
<g id="edge10" class="edge">
<title>header_2&#45;&gt;leaf_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M415.9141,-2265.058C415.6006,-2198.8651 414.5169,-1970.0552 414.1347,-1889.3533"/>
<polygon fill="#000000" stroke="#000000" points="417.633,-1888.9645 414.0856,-1878.9812 410.6331,-1888.9977 417.633,-1888.9645"/>
</g>
<!-- raw_11 -->
<g id="node12" class="node">
<title>raw_11</title>
<ellipse fill="none" stroke="#000000" cx="492" cy="-1860.9031" rx="27" ry="18"/>
<text text-anchor="middle" x="492" y="-1856.7031" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_3&#45;&gt;raw_11 -->
<g id="edge11" class="edge">
<title>prose_3&#45;&gt;raw_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M528.3672,-2265.058C522.4109,-2198.8651 501.8219,-1970.0552 494.56,-1889.3533"/>
<polygon fill="#000000" stroke="#000000" points="498.0089,-1888.6273 493.6267,-1878.9812 491.0371,-1889.2547 498.0089,-1888.6273"/>
</g>
<!-- raw_13 -->
<g id="node14" class="node">
<title>raw_13</title>
<ellipse fill="none" stroke="#000000" cx="564" cy="-1860.9031" rx="27" ry="18"/>
<text text-anchor="middle" x="564" y="-1856.7031" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_4&#45;&gt;raw_13 -->
<g id="edge13" class="edge">
<title>prose_4&#45;&gt;raw_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M611.5624,-2265.519C607.4998,-2255.1241 602.7498,-2241.6241 600,-2229.2037 572.4228,-2104.6424 565.9673,-1951.7177 564.4588,-1889.3805"/>
<polygon fill="#000000" stroke="#000000" points="567.9532,-1889.0792 564.2371,-1879.1575 560.9548,-1889.231 567.9532,-1889.0792"/>
</g>
<!-- raw_15 -->
<g id="node16" class="node">
<title>raw_15</title>
<ellipse fill="none" stroke="#000000" cx="636" cy="-1860.9031" rx="27" ry="18"/>
<text text-anchor="middle" x="636" y="-1856.7031" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_5&#45;&gt;raw_15 -->
<g id="edge15" class="edge">
<title>prose_5&#45;&gt;raw_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M691.2531,-2266.1466C684.3374,-2255.9609 676.3374,-2242.4609 672,-2229.2037 632.2351,-2107.6628 632.5432,-1952.4666 634.6483,-1889.4302"/>
<polygon fill="#000000" stroke="#000000" points="638.1585,-1889.2248 635.0386,-1879.0997 631.1635,-1888.9604 638.1585,-1889.2248"/>
</g>
<!-- leaf_17 -->
<g id="node18" class="node">
<title>leaf_17</title>
<polygon fill="none" stroke="#c0c0c0" points="1040.5,-2229.0044 681.5,-2229.0044 681.5,-1492.8017 1040.5,-1492.8017 1040.5,-2229.0044"/>
<text text-anchor="middle" x="861" y="-2214.0037" font-family="Inconsolata" font-size="14.00" fill="#000000">local L = require &quot;lpeg&quot;</text>
<text text-anchor="middle" x="861" y="-2182.6037" font-family="Inconsolata" font-size="14.00" fill="#000000">local pl_mini = require &quot;util/plmini&quot;</text>
<text text-anchor="middle" x="861" y="-2167.2036" font-family="Inconsolata" font-size="14.00" fill="#000000">local getfiles = pl_mini.dir.getfiles</text>
<text text-anchor="middle" x="861" y="-2151.8036" font-family="Inconsolata" font-size="14.00" fill="#000000">local makepath = pl_mini.dir.makepath</text>
<text text-anchor="middle" x="861" y="-2136.4036" font-family="Inconsolata" font-size="14.00" fill="#000000">local getdirectories = pl_mini.dir.getdirectories</text>
<text text-anchor="middle" x="861" y="-2121.0035" font-family="Inconsolata" font-size="14.00" fill="#000000">local extension = pl_mini.path.extension</text>
<text text-anchor="middle" x="861" y="-2105.6035" font-family="Inconsolata" font-size="14.00" fill="#000000">local dirname = pl_mini.path.dirname</text>
<text text-anchor="middle" x="861" y="-2090.2035" font-family="Inconsolata" font-size="14.00" fill="#000000">local basename = pl_mini.path.basename</text>
<text text-anchor="middle" x="861" y="-2074.8034" font-family="Inconsolata" font-size="14.00" fill="#000000">local read = pl_mini.file.read</text>
<text text-anchor="middle" x="861" y="-2059.4034" font-family="Inconsolata" font-size="14.00" fill="#000000">local write = pl_mini.file.write</text>
<text text-anchor="middle" x="861" y="-2044.0034" font-family="Inconsolata" font-size="14.00" fill="#000000">local isdir = pl_mini.path.isdir</text>
<text text-anchor="middle" x="861" y="-2012.6033" font-family="Inconsolata" font-size="14.00" fill="#000000">local u = {}</text>
<text text-anchor="middle" x="861" y="-1997.2033" font-family="Inconsolata" font-size="14.00" fill="#000000">function u.inherit(meta)</text>
<text text-anchor="middle" x="861" y="-1981.8033" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local MT = meta or {}</text>
<text text-anchor="middle" x="861" y="-1966.4032" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local M = setmetatable({}, MT)</text>
<text text-anchor="middle" x="861" y="-1951.0032" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;M.__index = M</text>
<text text-anchor="middle" x="861" y="-1935.6032" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local m = setmetatable({}, M)</text>
<text text-anchor="middle" x="861" y="-1920.2032" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;m.__index = m</text>
<text text-anchor="middle" x="861" y="-1904.8031" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return M, m</text>
<text text-anchor="middle" x="861" y="-1889.4031" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="861" y="-1874.0031" font-family="Inconsolata" font-size="14.00" fill="#000000">function u.export(mod, constructor)</text>
<text text-anchor="middle" x="861" y="-1858.603" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;mod.__call = constructor</text>
<text text-anchor="middle" x="861" y="-1843.203" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return setmetatable({}, mod)</text>
<text text-anchor="middle" x="861" y="-1827.803" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="861" y="-1796.4029" font-family="Inconsolata" font-size="14.00" fill="#000000">local a = require &quot;singletons/anterm&quot;</text>
<text text-anchor="middle" x="861" y="-1749.0029" font-family="Inconsolata" font-size="14.00" fill="#000000">local s = require &quot;singletons/status&quot; ()</text>
<text text-anchor="middle" x="861" y="-1733.6029" font-family="Inconsolata" font-size="14.00" fill="#000000">s.verbose = false</text>
<text text-anchor="middle" x="861" y="-1702.2028" font-family="Inconsolata" font-size="14.00" fill="#000000">local m = require &quot;orb:Orbit/morphemes&quot;</text>
<text text-anchor="middle" x="861" y="-1686.8028" font-family="Inconsolata" font-size="14.00" fill="#000000">local walk = require &quot;orb:walk/walk&quot;</text>
<text text-anchor="middle" x="861" y="-1671.4028" font-family="Inconsolata" font-size="14.00" fill="#000000">local strHas = walk.strHas</text>
<text text-anchor="middle" x="861" y="-1656.0027" font-family="Inconsolata" font-size="14.00" fill="#000000">local endsWith = walk.endsWith</text>
<text text-anchor="middle" x="861" y="-1640.6027" font-family="Inconsolata" font-size="14.00" fill="#000000">local subLastFor = walk.subLastFor</text>
<text text-anchor="middle" x="861" y="-1625.2027" font-family="Inconsolata" font-size="14.00" fill="#000000">local writeOnChange = walk.writeOnChange</text>
<text text-anchor="middle" x="861" y="-1609.8027" font-family="Inconsolata" font-size="14.00" fill="#000000">local Path = require &quot;orb:walk/path&quot;</text>
<text text-anchor="middle" x="861" y="-1594.4026" font-family="Inconsolata" font-size="14.00" fill="#000000">local Dir = require &quot;orb:walk/directory&quot;</text>
<text text-anchor="middle" x="861" y="-1579.0026" font-family="Inconsolata" font-size="14.00" fill="#000000">local File = require &quot;orb:walk/file&quot;</text>
<text text-anchor="middle" x="861" y="-1563.6026" font-family="Inconsolata" font-size="14.00" fill="#000000">local epeg = require &quot;orb:util/epeg&quot;</text>
<text text-anchor="middle" x="861" y="-1532.2025" font-family="Inconsolata" font-size="14.00" fill="#000000">local Doc = require &quot;orb:Orbit/doc&quot;</text>
<text text-anchor="middle" x="861" y="-1500.8025" font-family="Inconsolata" font-size="14.00" fill="#000000">local W, w = u.inherit()</text>
</g>
<!-- codeblock_6&#45;&gt;leaf_17 -->
<g id="edge17" class="edge">
<title>codeblock_6&#45;&gt;leaf_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M835.1602,-2265.058C835.6038,-2258.1189 836.1617,-2249.3929 836.811,-2239.2377"/>
<polygon fill="#000000" stroke="#000000" points="840.3155,-2239.2781 837.4607,-2229.0751 833.3297,-2238.8314 840.3155,-2239.2781"/>
</g>
<!-- leaf_18 -->
<g id="node19" class="node">
<title>leaf_18</title>
<polygon fill="none" stroke="#c0c0c0" points="1291.5,-1888.1035 1058.5,-1888.1035 1058.5,-1833.7026 1291.5,-1833.7026 1291.5,-1888.1035"/>
<text text-anchor="middle" x="1175" y="-1872.8031" font-family="Inconsolata" font-size="14.00" fill="#000000">function W.weaveMd(weaver, doc)</text>
<text text-anchor="middle" x="1175" y="-1857.4031" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return doc:toMarkdown()</text>
<text text-anchor="middle" x="1175" y="-1842.0031" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_7&#45;&gt;leaf_18 -->
<g id="edge18" class="edge">
<title>codeblock_7&#45;&gt;leaf_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1094.6094,-2265.058C1107.3285,-2201.1138 1150.2334,-1985.4142 1167.6053,-1898.079"/>
<polygon fill="#000000" stroke="#000000" points="1171.0753,-1898.5742 1169.5935,-1888.0835 1164.2098,-1897.2085 1171.0753,-1898.5742"/>
</g>
<!-- header_19 -->
<g id="node20" class="node">
<title>header_19</title>
<ellipse fill="none" stroke="#000000" cx="1375" cy="-1860.9031" rx="65.81" ry="18"/>
<text text-anchor="middle" x="1375" y="-1856.7031" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : .dot to .svg</text>
</g>
<!-- section_8&#45;&gt;header_19 -->
<g id="edge19" class="edge">
<title>section_8&#45;&gt;header_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1496.0286,-2267.5706C1479.5709,-2258.6395 1461.2685,-2245.8648 1450,-2229.2037 1376.4128,-2120.401 1372.1789,-1954.9914 1373.7298,-1889.2654"/>
<polygon fill="#000000" stroke="#000000" points="1377.2289,-1889.3431 1374.0316,-1879.2423 1370.2321,-1889.1324 1377.2289,-1889.3431"/>
</g>
<!-- prose_20 -->
<g id="node21" class="node">
<title>prose_20</title>
<ellipse fill="none" stroke="#000000" cx="1491" cy="-1860.9031" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1491" y="-1856.7031" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_8&#45;&gt;prose_20 -->
<g id="edge20" class="edge">
<title>section_8&#45;&gt;prose_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1530.2383,-2265.058C1523.8118,-2198.8651 1501.5973,-1970.0552 1493.7622,-1889.3533"/>
<polygon fill="#000000" stroke="#000000" points="1497.2052,-1888.5962 1492.7552,-1878.9812 1490.238,-1889.2726 1497.2052,-1888.5962"/>
</g>
<!-- prose_21 -->
<g id="node22" class="node">
<title>prose_21</title>
<ellipse fill="none" stroke="#000000" cx="1573" cy="-1860.9031" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1573" y="-1856.7031" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_8&#45;&gt;prose_21 -->
<g id="edge21" class="edge">
<title>section_8&#45;&gt;prose_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1533.7617,-2265.058C1540.1882,-2198.8651 1562.4027,-1970.0552 1570.2378,-1889.3533"/>
<polygon fill="#000000" stroke="#000000" points="1573.762,-1889.2726 1571.2448,-1878.9812 1566.7948,-1888.5962 1573.762,-1889.2726"/>
</g>
<!-- codeblock_22 -->
<g id="node23" class="node">
<title>codeblock_22</title>
<ellipse fill="none" stroke="#000000" cx="1770" cy="-1860.9031" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1770" y="-1856.7031" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 73&#45;85</text>
</g>
<!-- section_8&#45;&gt;codeblock_22 -->
<g id="edge22" class="edge">
<title>section_8&#45;&gt;codeblock_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1565.3466,-2267.2121C1581.7579,-2257.9815 1600.799,-2245.051 1614,-2229.2037 1703.6748,-2121.5527 1748.8997,-1954.8091 1764.0366,-1888.9927"/>
<polygon fill="#000000" stroke="#000000" points="1767.5119,-1889.4904 1766.2873,-1878.9666 1760.6818,-1887.9571 1767.5119,-1889.4904"/>
</g>
<!-- codeblock_23 -->
<g id="node24" class="node">
<title>codeblock_23</title>
<ellipse fill="none" stroke="#000000" cx="2193" cy="-1860.9031" rx="82.2579" ry="18"/>
<text text-anchor="middle" x="2193" y="-1856.7031" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 89&#45;152</text>
</g>
<!-- section_8&#45;&gt;codeblock_23 -->
<g id="edge23" class="edge">
<title>section_8&#45;&gt;codeblock_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1598.7733,-2277.2429C1680.3098,-2269.0802 1812.7136,-2252.708 1856,-2229.2037 2013.0829,-2143.9086 2135.7899,-1957.0061 2177.5572,-1887.5706"/>
<polygon fill="#000000" stroke="#000000" points="2180.5821,-1889.3315 2182.6893,-1878.9483 2174.567,-1885.7512 2180.5821,-1889.3315"/>
</g>
<!-- header_31 -->
<g id="node32" class="node">
<title>header_31</title>
<ellipse fill="none" stroke="#000000" cx="2840" cy="-1860.9031" rx="106.5613" ry="18"/>
<text text-anchor="middle" x="2840" y="-1856.7031" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : New Weave Interface</text>
</g>
<!-- section_9&#45;&gt;header_31 -->
<g id="edge31" class="edge">
<title>section_9&#45;&gt;header_31</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2914.6484,-2265.058C2902.3974,-2198.7297 2859.9877,-1969.1187 2845.1637,-1888.86"/>
<polygon fill="#000000" stroke="#000000" points="2848.5972,-1888.1791 2843.3391,-1878.9812 2841.7137,-1889.4506 2848.5972,-1888.1791"/>
</g>
<!-- prose_32 -->
<g id="node33" class="node">
<title>prose_32</title>
<ellipse fill="none" stroke="#000000" cx="2997" cy="-1860.9031" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2997" y="-1856.7031" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_9&#45;&gt;prose_32 -->
<g id="edge32" class="edge">
<title>section_9&#45;&gt;prose_32</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2933.8747,-2265.5414C2941.8925,-2255.5819 2950.9654,-2242.4971 2956,-2229.2037 3001.4502,-2109.1968 3000.9656,-1952.6125 2998.5346,-1889.3011"/>
<polygon fill="#000000" stroke="#000000" points="3002.0299,-1889.1145 2998.1016,-1879.2748 2995.0364,-1889.4165 3002.0299,-1889.1145"/>
</g>
<!-- section_33 -->
<g id="node34" class="node">
<title>section_33</title>
<ellipse fill="none" stroke="#000000" cx="3551" cy="-1860.9031" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="3551" y="-1856.7031" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 160&#45;202</text>
</g>
<!-- section_9&#45;&gt;section_33 -->
<g id="edge33" class="edge">
<title>section_9&#45;&gt;section_33</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2957.3439,-2267.8401C2981.2543,-2257.9357 3012.0693,-2244.1457 3038,-2229.2037 3233.2896,-2116.6721 3445.7466,-1947.3696 3521.8632,-1885.0422"/>
<polygon fill="#000000" stroke="#000000" points="3524.5401,-1887.3729 3530.0474,-1878.322 3520.0979,-1881.963 3524.5401,-1887.3729"/>
</g>
<!-- leaf_12 -->
<g id="node13" class="node">
<title>leaf_12</title>
<polygon fill="none" stroke="#c0c0c0" points="450,-1009.3027 0,-1009.3027 0,-937.5004 450,-937.5004 450,-1009.3027"/>
<text text-anchor="middle" x="225" y="-945.9016" font-family="Inconsolata" font-size="14.00" fill="#000000">Our weaver is currently somewhat narrowly focused on markdown.</text>
</g>
<!-- raw_11&#45;&gt;leaf_12 -->
<g id="edge12" class="edge">
<title>raw_11&#45;&gt;leaf_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M492.187,-1842.529C492.3117,-1788.1052 489.5888,-1623.3791 455,-1492.6025 406.2457,-1308.2673 299.8821,-1106.117 250.783,-1018.282"/>
<polygon fill="#000000" stroke="#000000" points="253.7389,-1016.3975 245.7905,-1009.3922 247.6355,-1019.8251 253.7389,-1016.3975"/>
</g>
<!-- leaf_14 -->
<g id="node15" class="node">
<title>leaf_14</title>
<polygon fill="none" stroke="#c0c0c0" points="659.5,-993.3037 468.5,-993.3037 468.5,-953.4995 659.5,-953.4995 659.5,-993.3037"/>
<text text-anchor="middle" x="564" y="-961.9016" font-family="Inconsolata" font-size="14.00" fill="#000000">This will change in time.</text>
</g>
<!-- raw_13&#45;&gt;leaf_14 -->
<g id="edge14" class="edge">
<title>raw_13&#45;&gt;leaf_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M564,-1842.7727C564,-1731.7274 564,-1143.6226 564,-1003.4244"/>
<polygon fill="#000000" stroke="#000000" points="567.5001,-1003.3953 564,-993.3954 560.5001,-1003.3954 567.5001,-1003.3953"/>
</g>
<!-- leaf_16 -->
<g id="node17" class="node">
<title>leaf_16</title>
<polygon fill="none" stroke="#c0c0c0" points="834,-993.3037 678,-993.3037 678,-953.4995 834,-953.4995 834,-993.3037"/>
<text text-anchor="middle" x="756" y="-961.9016" font-family="Inconsolata" font-size="14.00" fill="#000000">Now to activate dot!</text>
</g>
<!-- raw_15&#45;&gt;leaf_16 -->
<g id="edge16" class="edge">
<title>raw_15&#45;&gt;leaf_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M637.3598,-1842.8453C641.4794,-1789.2919 654.6139,-1626.7177 672,-1492.6025 696.2171,-1305.7936 735.9524,-1082.8999 750.4689,-1003.3908"/>
<polygon fill="#000000" stroke="#000000" points="753.9871,-1003.6089 752.3457,-993.142 747.1016,-1002.348 753.9871,-1003.6089"/>
</g>
<!-- leaf_24 -->
<g id="node25" class="node">
<title>leaf_24</title>
<polygon fill="none" stroke="#c0c0c0" points="1404,-991.4016 1276,-991.4016 1276,-955.4016 1404,-955.4016 1404,-991.4016"/>
<text text-anchor="middle" x="1340" y="-969.9016" font-family="Inconsolata" font-size="14.00" fill="#000000">*** .dot to .svg</text>
</g>
<!-- header_19&#45;&gt;leaf_24 -->
<g id="edge24" class="edge">
<title>header_19&#45;&gt;leaf_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1374.285,-1842.7727C1369.8865,-1731.2384 1346.5083,-1138.4335 1341.112,-1001.5983"/>
<polygon fill="#000000" stroke="#000000" points="1344.6053,-1001.3574 1340.7139,-991.5031 1337.6107,-1001.6333 1344.6053,-1001.3574"/>
</g>
<!-- raw_25 -->
<g id="node26" class="node">
<title>raw_25</title>
<ellipse fill="none" stroke="#000000" cx="1449" cy="-973.4016" rx="27" ry="18"/>
<text text-anchor="middle" x="1449" y="-969.2016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_20&#45;&gt;raw_25 -->
<g id="edge25" class="edge">
<title>prose_20&#45;&gt;raw_25</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1490.142,-1842.7727C1484.8638,-1731.2384 1456.8099,-1138.4335 1450.3344,-1001.5983"/>
<polygon fill="#000000" stroke="#000000" points="1453.8255,-1001.3265 1449.8566,-991.5031 1446.8334,-1001.6574 1453.8255,-1001.3265"/>
</g>
<!-- raw_27 -->
<g id="node28" class="node">
<title>raw_27</title>
<ellipse fill="none" stroke="#000000" cx="1521" cy="-973.4016" rx="27" ry="18"/>
<text text-anchor="middle" x="1521" y="-969.2016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_21&#45;&gt;raw_27 -->
<g id="edge27" class="edge">
<title>prose_21&#45;&gt;raw_27</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1571.9377,-1842.7727C1565.4028,-1731.2384 1530.6695,-1138.4335 1522.6521,-1001.5983"/>
<polygon fill="#000000" stroke="#000000" points="1526.1396,-1001.2813 1522.0606,-991.5031 1519.1516,-1001.6908 1526.1396,-1001.2813"/>
</g>
<!-- leaf_29 -->
<g id="node30" class="node">
<title>leaf_29</title>
<polygon fill="none" stroke="#c0c0c0" points="2044,-1062.3024 1566,-1062.3024 1566,-884.5008 2044,-884.5008 2044,-1062.3024"/>
<text text-anchor="middle" x="1805" y="-1046.9018" font-family="Inconsolata" font-size="14.00" fill="#000000">local popen = io.popen</text>
<text text-anchor="middle" x="1805" y="-1031.5017" font-family="Inconsolata" font-size="14.00" fill="#000000">local function dotToSvg(dotted, out_file)</text>
<text text-anchor="middle" x="1805" y="-1016.1017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local success, svg_file = pcall (popen,</text>
<text text-anchor="middle" x="1805" y="-1000.7017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&quot;dot &#45;Tsvg &quot; .. tostring(out_file), &quot;r&quot;)</text>
<text text-anchor="middle" x="1805" y="-985.3016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if success then</text>
<text text-anchor="middle" x="1805" y="-969.9016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return svg_file:read(&quot;*a&quot;)</text>
<text text-anchor="middle" x="1805" y="-954.5016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else</text>
<text text-anchor="middle" x="1805" y="-939.1015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; #todo start using %d and format!</text>
<text text-anchor="middle" x="1805" y="-923.7015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;s:complain(&quot;dotError&quot;, &quot;dot failed with &quot; .. success)</text>
<text text-anchor="middle" x="1805" y="-908.3015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1805" y="-892.9015" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_22&#45;&gt;leaf_29 -->
<g id="edge29" class="edge">
<title>codeblock_22&#45;&gt;leaf_29</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1770.715,-1842.7727C1774.5623,-1745.2169 1792.9299,-1279.4655 1801.0845,-1072.6879"/>
<polygon fill="#000000" stroke="#000000" points="1804.5918,-1072.5702 1801.4886,-1062.44 1797.5972,-1072.2942 1804.5918,-1072.5702"/>
</g>
<!-- leaf_30 -->
<g id="node31" class="node">
<title>leaf_30</title>
<polygon fill="none" stroke="#c0c0c0" points="2743.5,-1456.8034 2062.5,-1456.8034 2062.5,-489.9998 2743.5,-489.9998 2743.5,-1456.8034"/>
<text text-anchor="middle" x="2403" y="-1441.4025" font-family="Inconsolata" font-size="14.00" fill="#000000">local function weave_dir(weaver, pwd, depth)</text>
<text text-anchor="middle" x="2403" y="-1426.0024" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local depth = depth + 1</text>
<text text-anchor="middle" x="2403" y="-1410.6024" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for dir_str in pl_mini.dir.walk(pwd, false, false) do</text>
<text text-anchor="middle" x="2403" y="-1395.2024" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local dir = Dir(dir_str)</text>
<text text-anchor="middle" x="2403" y="-1379.8023" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if not strHas(&quot;.git&quot;, dir.path.str)</text>
<text text-anchor="middle" x="2403" y="-1364.4023" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;and not strHas(&quot;src/lib&quot;, dir.path.str) then</text>
<text text-anchor="middle" x="2403" y="-1349.0023" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;dir = dir.path.str &#45;&#45; migrate this down</text>
<text text-anchor="middle" x="2403" y="-1333.6022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local files = getfiles(dir)</text>
<text text-anchor="middle" x="2403" y="-1318.2022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;s:verb((&quot; &#160;&quot;):rep(depth) .. &quot;* &quot; .. dir)</text>
<text text-anchor="middle" x="2403" y="-1302.8022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local subdirs = getdirectories(dir)</text>
<text text-anchor="middle" x="2403" y="-1287.4022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;for _, f in ipairs(files) do</text>
<text text-anchor="middle" x="2403" y="-1272.0021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if extension(f) == &quot;.orb&quot; then</text>
<text text-anchor="middle" x="2403" y="-1256.6021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; Weave and prepare out directory</text>
<text text-anchor="middle" x="2403" y="-1241.2021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;s:verb((&quot; &#160;&quot;):rep(depth) .. &quot; &#160;&#45; &quot; .. f)</text>
<text text-anchor="middle" x="2403" y="-1225.802" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local orb_f = read(f)</text>
<text text-anchor="middle" x="2403" y="-1210.402" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local doc = Doc(orb_f)</text>
<text text-anchor="middle" x="2403" y="-1195.002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local doc_md_dir = subLastFor(&quot;/orb&quot;, &quot;/doc/md&quot;, dirname(f))</text>
<text text-anchor="middle" x="2403" y="-1179.6019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local doc_dot_dir = subLastFor(&quot;/orb&quot;, &quot;/doc/dot&quot;, dirname(f))</text>
<text text-anchor="middle" x="2403" y="-1164.2019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local doc_svg_dir = subLastFor(&quot;/orb&quot;, &quot;/doc/svg&quot;, dirname(f))</text>
<text text-anchor="middle" x="2403" y="-1148.8019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;makepath(doc_md_dir)</text>
<text text-anchor="middle" x="2403" y="-1133.4018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;makepath(doc_dot_dir)</text>
<text text-anchor="middle" x="2403" y="-1118.0018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;makepath(doc_svg_dir)</text>
<text text-anchor="middle" x="2403" y="-1102.6018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local bare_name = basename(f):sub(1, &#45;5) &#45;&#45; &#160;== #&quot;.orb&quot;</text>
<text text-anchor="middle" x="2403" y="-1087.2017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local out_md_name = doc_md_dir .. &quot;/&quot; .. bare_name .. &quot;.md&quot;</text>
<text text-anchor="middle" x="2403" y="-1071.8017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local out_dot_name = doc_dot_dir .. &quot;/&quot; .. bare_name .. &quot;.dot&quot;</text>
<text text-anchor="middle" x="2403" y="-1056.4017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local out_svg_name = doc_svg_dir .. &quot;/&quot; .. bare_name .. &quot;.svg&quot;</text>
<text text-anchor="middle" x="2403" y="-1041.0017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local woven_md = weaver:weaveMd(doc) or &quot;&quot;</text>
<text text-anchor="middle" x="2403" y="-1009.6016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; Compare, report, and write out if necessary</text>
<text text-anchor="middle" x="2403" y="-994.2016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local last_md = read(out_md_name) or &quot;&quot;</text>
<text text-anchor="middle" x="2403" y="-978.8016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local changed_md = writeOnChange(woven_md, last_md, out_md_name, depth)</text>
<text text-anchor="middle" x="2403" y="-963.4015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local woven_dot = doc:dot() or &quot;&quot;</text>
<text text-anchor="middle" x="2403" y="-948.0015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local last_dot = read(out_dot_name) or &quot;&quot;</text>
<text text-anchor="middle" x="2403" y="-932.6015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local changed_dot = writeOnChange(woven_dot, last_dot, out_dot_name, depth)</text>
<text text-anchor="middle" x="2403" y="-901.2014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; SVG call is fairly slow and only useful of the dot has changed</text>
<text text-anchor="middle" x="2403" y="-885.8014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if changed_dot then</text>
<text text-anchor="middle" x="2403" y="-870.4014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local woven_svg = dotToSvg(woven_dot, out_dot_name)</text>
<text text-anchor="middle" x="2403" y="-855.0013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local last_svg = read(out_svg_name) or &quot;&quot;</text>
<text text-anchor="middle" x="2403" y="-839.6013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;writeOnChange(woven_svg, last_svg, out_svg_name, depth)</text>
<text text-anchor="middle" x="2403" y="-824.2013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2403" y="-808.8012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2403" y="-793.4012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2403" y="-778.0012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2403" y="-762.6012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2403" y="-731.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return true</text>
<text text-anchor="middle" x="2403" y="-715.8011" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="2403" y="-684.4011" font-family="Inconsolata" font-size="14.00" fill="#000000">local function weave_all(weaver, pwd)</text>
<text text-anchor="middle" x="2403" y="-669.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for dir in pl_mini.dir.walk(pwd, false, false) do</text>
<text text-anchor="middle" x="2403" y="-653.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if not strHas(&quot;.git&quot;, dir) and isdir(dir)</text>
<text text-anchor="middle" x="2403" y="-638.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;and endsWith(&quot;orb&quot;, dir) then</text>
<text text-anchor="middle" x="2403" y="-622.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;s:chat(a.cyan(&quot;Weave: &quot; .. dir))</text>
<text text-anchor="middle" x="2403" y="-607.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return weave_dir(weaver, dir, 0)</text>
<text text-anchor="middle" x="2403" y="-592.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2403" y="-576.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2403" y="-545.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return false</text>
<text text-anchor="middle" x="2403" y="-529.8008" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="2403" y="-498.4007" font-family="Inconsolata" font-size="14.00" fill="#000000">W.weave_all = weave_all</text>
</g>
<!-- codeblock_23&#45;&gt;leaf_30 -->
<g id="edge30" class="edge">
<title>codeblock_23&#45;&gt;leaf_30</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2197.29,-1842.7727C2209.627,-1790.634 2246.8494,-1633.3249 2286.3024,-1466.5885"/>
<polygon fill="#000000" stroke="#000000" points="2289.7659,-1467.1509 2288.6627,-1456.6137 2282.954,-1465.5391 2289.7659,-1467.1509"/>
</g>
<!-- leaf_26 -->
<g id="node27" class="node">
<title>leaf_26</title>
<polygon fill="none" stroke="#c0c0c0" points="1438,-300.7019 1310,-300.7019 1310,-244.8989 1438,-244.8989 1438,-300.7019"/>
<text text-anchor="middle" x="1374" y="-253.3004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;Stripped down:</text>
</g>
<!-- raw_25&#45;&gt;leaf_26 -->
<g id="edge26" class="edge">
<title>raw_25&#45;&gt;leaf_26</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1448.3271,-955.3448C1445.8068,-891.5496 1435.8751,-670.8816 1413,-490.2007 1404.9741,-426.8074 1390.8718,-353.8271 1382.0045,-310.6021"/>
<polygon fill="#000000" stroke="#000000" points="1385.4303,-309.8848 1379.9787,-300.8002 1378.5752,-311.3016 1385.4303,-309.8848"/>
</g>
<!-- leaf_28 -->
<g id="node29" class="node">
<title>leaf_28</title>
<polygon fill="none" stroke="#c0c0c0" points="1738,-292.7025 1456,-292.7025 1456,-252.8983 1738,-252.8983 1738,-292.7025"/>
<text text-anchor="middle" x="1597" y="-261.3004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#45; [ ] #todo add error checking here.</text>
</g>
<!-- raw_27&#45;&gt;leaf_28 -->
<g id="edge28" class="edge">
<title>raw_27&#45;&gt;leaf_28</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1521.6442,-955.3412C1524.0691,-891.5338 1533.7227,-670.8302 1557,-490.2007 1565.7044,-422.6557 1581.5623,-344.2874 1590.4733,-302.5591"/>
<polygon fill="#000000" stroke="#000000" points="1593.8979,-303.2812 1592.5805,-292.7686 1587.0546,-301.8082 1593.8979,-303.2812"/>
</g>
<!-- leaf_34 -->
<g id="node35" class="node">
<title>leaf_34</title>
<polygon fill="none" stroke="#c0c0c0" points="2932,-991.4016 2762,-991.4016 2762,-955.4016 2932,-955.4016 2932,-991.4016"/>
<text text-anchor="middle" x="2847" y="-969.9016" font-family="Inconsolata" font-size="14.00" fill="#000000">** New Weave Interface</text>
</g>
<!-- header_31&#45;&gt;leaf_34 -->
<g id="edge34" class="edge">
<title>header_31&#45;&gt;leaf_34</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2840.143,-1842.7727C2841.0227,-1731.2384 2845.6983,-1138.4335 2846.7776,-1001.5983"/>
<polygon fill="#000000" stroke="#000000" points="2850.2781,-1001.5305 2846.8572,-991.5031 2843.2784,-1001.4752 2850.2781,-1001.5305"/>
</g>
<!-- raw_35 -->
<g id="node36" class="node">
<title>raw_35</title>
<ellipse fill="none" stroke="#000000" cx="2990" cy="-973.4016" rx="27" ry="18"/>
<text text-anchor="middle" x="2990" y="-969.2016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_32&#45;&gt;raw_35 -->
<g id="edge35" class="edge">
<title>prose_32&#45;&gt;raw_35</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2996.857,-1842.7727C2995.9773,-1731.2384 2991.3017,-1138.4335 2990.2224,-1001.5983"/>
<polygon fill="#000000" stroke="#000000" points="2993.7216,-1001.4752 2990.1428,-991.5031 2986.7219,-1001.5305 2993.7216,-1001.4752"/>
</g>
<!-- header_37 -->
<g id="node38" class="node">
<title>header_37</title>
<ellipse fill="none" stroke="#000000" cx="3258" cy="-973.4016" rx="92.8553" ry="18"/>
<text text-anchor="middle" x="3258" y="-969.2016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : weaveDeck(deck)</text>
</g>
<!-- section_33&#45;&gt;header_37 -->
<g id="edge37" class="edge">
<title>section_33&#45;&gt;header_37</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3545.0144,-1842.7727C3508.1555,-1731.1265 3312.0909,-1137.2439 3267.1734,-1001.1879"/>
<polygon fill="#000000" stroke="#000000" points="3270.4347,-999.9018 3263.976,-991.5031 3263.7875,-1002.0963 3270.4347,-999.9018"/>
</g>
<!-- prose_38 -->
<g id="node39" class="node">
<title>prose_38</title>
<ellipse fill="none" stroke="#000000" cx="3466" cy="-973.4016" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="3466" y="-969.2016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_33&#45;&gt;prose_38 -->
<g id="edge38" class="edge">
<title>section_33&#45;&gt;prose_38</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3549.2636,-1842.7727C3538.5814,-1731.2384 3481.8059,-1138.4335 3468.7005,-1001.5983"/>
<polygon fill="#000000" stroke="#000000" points="3472.1712,-1001.1239 3467.7337,-991.5031 3465.2031,-1001.7913 3472.1712,-1001.1239"/>
</g>
<!-- codeblock_39 -->
<g id="node40" class="node">
<title>codeblock_39</title>
<ellipse fill="none" stroke="#000000" cx="3636" cy="-973.4016" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="3636" y="-969.2016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 164&#45;188</text>
</g>
<!-- section_33&#45;&gt;codeblock_39 -->
<g id="edge39" class="edge">
<title>section_33&#45;&gt;codeblock_39</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3552.7364,-1842.7727C3563.4186,-1731.2384 3620.1941,-1138.4335 3633.2995,-1001.5983"/>
<polygon fill="#000000" stroke="#000000" points="3636.7969,-1001.7913 3634.2663,-991.5031 3629.8288,-1001.1239 3636.7969,-1001.7913"/>
</g>
<!-- codeblock_40 -->
<g id="node41" class="node">
<title>codeblock_40</title>
<ellipse fill="none" stroke="#000000" cx="3943" cy="-973.4016" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="3943" y="-969.2016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 190&#45;197</text>
</g>
<!-- section_33&#45;&gt;codeblock_40 -->
<g id="edge40" class="edge">
<title>section_33&#45;&gt;codeblock_40</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3559.1777,-1842.7961C3584.8263,-1785.9713 3665.9127,-1606.0645 3732,-1456.6025 3808.5438,-1283.4922 3899.0931,-1074.7886 3931.086,-1000.927"/>
<polygon fill="#000000" stroke="#000000" points="3934.4419,-1001.9849 3935.2041,-991.4175 3928.0184,-999.2031 3934.4419,-1001.9849"/>
</g>
<!-- codeblock_41 -->
<g id="node42" class="node">
<title>codeblock_41</title>
<ellipse fill="none" stroke="#000000" cx="4251" cy="-973.4016" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="4251" y="-969.2016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 199&#45;201</text>
</g>
<!-- section_33&#45;&gt;codeblock_41 -->
<g id="edge41" class="edge">
<title>section_33&#45;&gt;codeblock_41</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3579.4225,-1844.1235C3661.1909,-1794.5861 3900.0427,-1640.845 4039,-1456.6025 4153.8503,-1304.3232 4222.1149,-1080.1207 4243.6008,-1001.7148"/>
<polygon fill="#000000" stroke="#000000" points="4247.0929,-1002.2084 4246.3221,-991.6417 4240.3351,-1000.3828 4247.0929,-1002.2084"/>
</g>
<!-- leaf_36 -->
<g id="node37" class="node">
<title>leaf_36</title>
<polygon fill="none" stroke="#c0c0c0" points="3148,-308.7015 2796,-308.7015 2796,-236.8992 3148,-236.8992 3148,-308.7015"/>
<text text-anchor="middle" x="2972" y="-261.3004" font-family="Inconsolata" font-size="14.00" fill="#000000">Time to bring the weaver up to modern standards.</text>
</g>
<!-- raw_35&#45;&gt;leaf_36 -->
<g id="edge36" class="edge">
<title>raw_35&#45;&gt;leaf_36</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2989.537,-955.3792C2987.2067,-864.6808 2976.7346,-457.0811 2973.1827,-318.8331"/>
<polygon fill="#000000" stroke="#000000" points="2976.6752,-318.4937 2972.9194,-308.587 2969.6775,-318.6736 2976.6752,-318.4937"/>
</g>
<!-- leaf_42 -->
<g id="node43" class="node">
<title>leaf_42</title>
<polygon fill="none" stroke="#c0c0c0" points="3315.5,-290.8004 3166.5,-290.8004 3166.5,-254.8004 3315.5,-254.8004 3315.5,-290.8004"/>
<text text-anchor="middle" x="3241" y="-269.3004" font-family="Inconsolata" font-size="14.00" fill="#000000">*** weaveDeck(deck)</text>
</g>
<!-- header_37&#45;&gt;leaf_42 -->
<g id="edge42" class="edge">
<title>header_37&#45;&gt;leaf_42</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3257.5627,-955.3792C3255.2593,-860.4539 3244.533,-418.4011 3241.692,-301.3187"/>
<polygon fill="#000000" stroke="#000000" points="3245.1839,-300.9373 3241.4422,-291.0252 3238.1859,-301.1072 3245.1839,-300.9373"/>
</g>
<!-- raw_43 -->
<g id="node44" class="node">
<title>raw_43</title>
<ellipse fill="none" stroke="#000000" cx="3361" cy="-272.8004" rx="27" ry="18"/>
<text text-anchor="middle" x="3361" y="-268.6004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_38&#45;&gt;raw_43 -->
<g id="edge43" class="edge">
<title>prose_38&#45;&gt;raw_43</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3463.299,-955.3792C3449.058,-860.3582 3382.6877,-417.5095 3365.2212,-300.9656"/>
<polygon fill="#000000" stroke="#000000" points="3368.675,-300.396 3363.7314,-291.0252 3361.7523,-301.4335 3368.675,-300.396"/>
</g>
<!-- leaf_45 -->
<g id="node46" class="node">
<title>leaf_45</title>
<polygon fill="none" stroke="#c0c0c0" points="3898,-454.1011 3406,-454.1011 3406,-91.4996 3898,-91.4996 3898,-454.1011"/>
<text text-anchor="middle" x="3652" y="-439.0007" font-family="Inconsolata" font-size="14.00" fill="#000000">local function weaveDeck(deck)</text>
<text text-anchor="middle" x="3652" y="-423.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local dir = deck.dir</text>
<text text-anchor="middle" x="3652" y="-408.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local codex = deck.codex</text>
<text text-anchor="middle" x="3652" y="-392.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local orbDir = codex.orb</text>
<text text-anchor="middle" x="3652" y="-377.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local docDir = codex.doc</text>
<text text-anchor="middle" x="3652" y="-362.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; #todo load .deck file here</text>
<text text-anchor="middle" x="3652" y="-346.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for i, sub in ipairs(deck) do</text>
<text text-anchor="middle" x="3652" y="-331.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;weaveDeck(sub)</text>
<text text-anchor="middle" x="3652" y="-315.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3652" y="-300.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for name, doc in pairs(deck.docs) do</text>
<text text-anchor="middle" x="3652" y="-285.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local woven, ext = weaver:weaveMd(doc)</text>
<text text-anchor="middle" x="3652" y="-269.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if woven then</text>
<text text-anchor="middle" x="3652" y="-254.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; add to docMds</text>
<text text-anchor="middle" x="3652" y="-238.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local docMdpath = Path(name):subFor(orbDir, srcDir, ext)</text>
<text text-anchor="middle" x="3652" y="-223.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;s:verb(&quot;wove: &quot; .. name)</text>
<text text-anchor="middle" x="3652" y="-208.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;s:verb(&quot;into: &#160;&#160;&#160;&quot; .. tostring(docMdpath))</text>
<text text-anchor="middle" x="3652" y="-192.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;deck.docMds[docMdpath] = woven</text>
<text text-anchor="middle" x="3652" y="-177.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;codex.docMds[docMdpath] = woven</text>
<text text-anchor="middle" x="3652" y="-161.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3652" y="-130.4001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3652" y="-115.0001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return srcs</text>
<text text-anchor="middle" x="3652" y="-99.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_39&#45;&gt;leaf_45 -->
<g id="edge45" class="edge">
<title>codeblock_39&#45;&gt;leaf_45</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3636.4116,-955.3792C3637.9626,-887.4639 3643.5716,-641.8597 3647.6172,-464.7107"/>
<polygon fill="#000000" stroke="#000000" points="3651.1217,-464.5504 3647.851,-454.4731 3644.1235,-464.3905 3651.1217,-464.5504"/>
</g>
<!-- leaf_46 -->
<g id="node47" class="node">
<title>leaf_46</title>
<polygon fill="none" stroke="#c0c0c0" points="4198,-323.4013 3916,-323.4013 3916,-222.1995 4198,-222.1995 4198,-323.4013"/>
<text text-anchor="middle" x="4057" y="-308.4004" font-family="Inconsolata" font-size="14.00" fill="#000000">local function new(Weaver, doc)</text>
<text text-anchor="middle" x="4057" y="-293.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local weaver = setmetatable({}, W)</text>
<text text-anchor="middle" x="4057" y="-245.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return weaver</text>
<text text-anchor="middle" x="4057" y="-230.2003" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_40&#45;&gt;leaf_46 -->
<g id="edge46" class="edge">
<title>codeblock_40&#45;&gt;leaf_46</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3945.9326,-955.3792C3960.1985,-867.7058 4022.6477,-483.9167 4047.1162,-333.5425"/>
<polygon fill="#000000" stroke="#000000" points="4050.5901,-333.9855 4048.7416,-323.5532 4043.6809,-332.8612 4050.5901,-333.9855"/>
</g>
<!-- leaf_47 -->
<g id="node48" class="node">
<title>leaf_47</title>
<polygon fill="none" stroke="#c0c0c0" points="4288,-290.8004 4216,-290.8004 4216,-254.8004 4288,-254.8004 4288,-290.8004"/>
<text text-anchor="middle" x="4252" y="-269.3004" font-family="Inconsolata" font-size="14.00" fill="#000000">return W</text>
</g>
<!-- codeblock_41&#45;&gt;leaf_47 -->
<g id="edge47" class="edge">
<title>codeblock_41&#45;&gt;leaf_47</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4251.0257,-955.3792C4251.1612,-860.4539 4251.7922,-418.4011 4251.9593,-301.3187"/>
<polygon fill="#000000" stroke="#000000" points="4255.4596,-301.0302 4251.974,-291.0252 4248.4596,-301.0202 4255.4596,-301.0302"/>
</g>
<!-- leaf_44 -->
<g id="node45" class="node">
<title>leaf_44</title>
<polygon fill="none" stroke="#c0c0c0" points="3533.5,-55.6015 3188.5,-55.6015 3188.5,.2015 3533.5,.2015 3533.5,-55.6015"/>
<text text-anchor="middle" x="3361" y="-8.2" font-family="Inconsolata" font-size="14.00" fill="#000000">This takes a properly cased deck and weaves it.</text>
</g>
<!-- raw_43&#45;&gt;leaf_44 -->
<g id="edge44" class="edge">
<title>raw_43&#45;&gt;leaf_44</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3361,-254.7776C3361,-215.0823 3361,-119.3834 3361,-65.7535"/>
<polygon fill="#000000" stroke="#000000" points="3364.5001,-65.6175 3361,-55.6175 3357.5001,-65.6176 3364.5001,-65.6175"/>
</g>
</g>
</svg>
